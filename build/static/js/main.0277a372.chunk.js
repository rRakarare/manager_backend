(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{530:function(e,t,n){},630:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(22),o=n.n(a),i=(n(530),n(531),n(14)),s=n(681),u=n(680),l=n(690),j=n(122),d=n(40),p=n(99),b=n(485),h=n(486),f=n(268);function O(){var e=localStorage.getItem("access_token");return!!e&&Object(f.a)(e).exp>(new Date).getTime()/1e3}var x=Object(b.a)(Object(h.devtools)((function(e){return{auth:O(),setAuth:function(t){return e((function(e){return{auth:t}}))},invoices:[],setInvoices:function(t){return e((function(e){return{invoices:t}}))},allIinvoices:[],setAllInvoices:function(t){return e((function(e){return{allInvoices:t}}))},invoiceStati:[],setInvoiceStati:function(t){return e((function(e){return{invoiceStati:t}}))},projectsteps:[],setProjectsteps:function(t){return e((function(e){return{projectsteps:t}}))},projectdata:{},setProjectdata:function(t){return e((function(e){return{projectdata:t}}))},cropImage:null,setCropImage:function(t){return e((function(e){return{cropImage:t}}))},cropModalOpen:!1,setCropModalOpen:function(t){return e((function(e){return{cropModalOpen:t}}))},openClient:!1,setOpenClient:function(t){return e((function(e){return{openClient:t}}))},projectModalOpen:!1,setProjectModalOpen:function(t){return e((function(e){return{projectModalOpen:t}}))},editModalOpen:!1,setEditModalOpen:function(t){return e((function(e){return{editModalOpen:t}}))},invoiceCreateModel:!1,setInvoiceCreateModel:function(t){return e((function(e){return{invoiceCreateModel:t}}))},invoiceEditModel:!1,setInvoiceEditModel:function(t){return e((function(e){return{invoiceEditModel:t}}))}}}))),g=n.p+"static/media/ubc.ebb132ce.svg",m=n(3);var v=function(e){var t=e.children,n=c.a.useState(!1),r=Object(i.a)(n,2),a=r[0],o=r[1],b=x((function(e){return e.auth})),h=x((function(e){return e.setAuth})),f=Object(d.g)(),O=localStorage.getItem("profile_name"),v=Object(m.jsx)(s.a.Menu,{position:"right",children:Object(m.jsx)(u.a,{item:!0,text:O,children:Object(m.jsxs)(u.a.Menu,{children:[Object(m.jsx)(u.a.Item,{children:"Profile"}),Object(m.jsx)(u.a.Item,{onClick:function(){return h(!1),localStorage.removeItem("access_token"),localStorage.removeItem("profile_name"),void f.push("/login")},children:"Logout"})]})})});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:Object(m.jsxs)(s.a,{style:{margin:0},fixed:"top",children:[Object(m.jsx)(s.a.Item,{onClick:function(){o(!a)},children:Object(m.jsx)("i",{className:"fas fa-bars"})}),Object(m.jsx)(p.b,{to:"/",children:Object(m.jsx)(s.a.Item,{children:Object(m.jsx)("img",{style:{width:"70px"},src:g,alt:"logo"})})}),b?v:null]})}),Object(m.jsxs)(l.a.Pushable,{style:{},children:[Object(m.jsxs)(l.a,{as:s.a,animation:"push",icon:"labeled",vertical:!0,visible:a,width:"thin",style:{backgroundColor:"white",paddingTop:53.63},children:[Object(m.jsxs)(s.a.Item,{as:p.b,to:"/",children:[Object(m.jsx)(j.a,{name:"home"}),"Home"]}),Object(m.jsxs)(s.a.Item,{as:p.b,to:"/clients",children:[Object(m.jsx)(j.a,{name:"gamepad"}),"Kunden"]}),Object(m.jsxs)(s.a.Item,{as:p.b,to:"/",children:[Object(m.jsx)(j.a,{name:"camera"}),"Channels"]})]}),Object(m.jsx)(l.a.Pusher,{style:{overflow:"scroll",height:"100vh",paddingTop:53.63,transition:"400ms",paddingRight:a?148:0},children:t})]})]})},k=n(7),w=n.n(k),y=n(13),C=n(691),S=n(692),I=n(682),F=n(645),A=n(169),E=n.n(A).a.create({baseURL:"https://testmanager-123.herokuapp.com/api/",timeout:5e3,headers:{"Content-Type":"application/json",accept:"application/json"}});E.interceptors.request.use(function(){var e=Object(y.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=localStorage.getItem("access_token"))&&(t.headers.Authorization="Bearer ".concat(n)),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)}));var z=E;var _=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(i.a)(a,2),s=o[0],u=o[1],l=Object(r.useState)(""),j=Object(i.a)(l,2),p=j[0],b=j[1],h=x((function(e){return[e.auth,e.setAuth]})),O=Object(i.a)(h,2),g=(O[0],O[1]),v=Object(d.g)(),k=function(){var e=Object(y.a)(w.a.mark((function e(){var t,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.post("token",{username:n,password:s});case 3:200===(t=e.sent).status&&(localStorage.setItem("access_token",t.data.access),localStorage.setItem("refresh_token",t.data.refresh),z.defaults.headers.Authorization="JWT "+localStorage.getItem("access_token"),r=Object(f.a)(t.data.access).name,localStorage.setItem("profile_name",r),g(!0),v.push("/")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response.data),b(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(C.a,{textAlign:"center",style:{height:"80%",maxWidth:"100%"},verticalAlign:"middle",children:Object(m.jsxs)(C.a.Column,{style:{maxWidth:420},children:[Object(m.jsx)(S.a,{as:"h2",color:"teal",textAlign:"center",children:"UBCDATA Log-in to your account"}),Object(m.jsxs)(I.a,{size:"large",children:[Object(m.jsx)(I.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"username",value:n,onChange:function(e){return c(e.target.value)}}),Object(m.jsx)(I.a.Input,{fluid:!0,error:p.detail&&{content:p.detail},icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",value:s,onChange:function(e){return u(e.target.value)}}),Object(m.jsx)(F.a,{onClick:function(){return k()},color:"teal",fluid:!0,size:"large",children:"Login"})]})]})})},M=n(20),P=n(500);var D=function(e){var t=e.component,n=Object(P.a)(e,["component"]),c=x((function(e){return e.auth})),a=x((function(e){return e.setAuth}));return Object(r.useEffect)((function(){c&&a(O())}),[]),Object(m.jsx)(d.b,Object(M.a)(Object(M.a)({},n),{},{render:function(e){return c?Object(m.jsx)(t,Object(M.a)(Object(M.a)({},n),e)):Object(m.jsx)(d.a,{to:"/login"})}}))},L=n(693),R=n(687),H=n(683),T=n(154),B=n.n(T);var N=function(e){var t=e.data,n=e.status,c=e.isLoading,a=e.rerenderfunc,o=Object(r.useState)(!1),s=Object(i.a)(o,2),u=s[0],l=s[1],j=Object(r.useState)({}),p=Object(i.a)(j,2),b=p[0],h=p[1],f=x((function(e){return[e.allInvoices,e.setAllInvoices]})),O=Object(i.a)(f,2),g=(O[0],O[1],Object(d.g)()),v=x((function(e){return e.setProjectModalOpen})),k=function(){var e=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.delete("/projects/".concat(b.id));case 3:a(),l(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),C={},S=[];return c||(n.forEach((function(e){C[e.id]=e.name})),S=t.map((function(e){var t=new Date(e.created_at).toLocaleDateString("de",{hour:"numeric",minute:"numeric"});return{id:e.id,title:e.title,project_number:e.project_number,client:e.client&&e.client.name,created_at:t,status:e.status&&e.status.id,honorar:e.honorar}}))),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(B.a,{isLoading:c,title:"Projektliste",columns:[{title:"Nr.",field:"project_number"},{title:"Titel",field:"title"},{title:"Kunde",field:"client"},{title:"Erstellt",field:"created_at",type:"datetime"},{title:"Status",field:"status",lookup:C},{title:"Honorar",field:"honorar",type:"currency",currencySetting:{locale:"de",currencyCode:"EUR"}}],data:S,options:{actionsColumnIndex:-1,sorting:!0,filtering:!0,exportButton:!0},actions:[{icon:"edit",tooltip:"Projektdetails",onClick:function(e,t){g.push("/projects/".concat(t.id))}},{icon:"add",tooltip:"Neues Projekt",isFreeAction:!0,onClick:function(){v(!0)}},{icon:"delete",tooltip:"Projekt l\xf6schen",onClick:function(e,t){console.log(t),h(t),l(!0)}}]}),Object(m.jsxs)(H.a,{open:u,onClose:function(){return l(!1)},children:[Object(m.jsx)(H.a.Header,{children:"Projekt l\xf6schen"}),Object(m.jsxs)(H.a.Content,{children:["Das Project"," ",Object(m.jsxs)("strong",{children:[b.title," (",b.client,")"]})," ","wirklich l\xf6schen ?"]}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(F.a,{negative:!0,onClick:function(){return l(!1)},children:"Abbrechen"}),Object(m.jsx)(F.a,{positive:!0,onClick:function(){return k()},children:"L\xf6schen"})]})]})]})},K=n(667);var V=function(){var e=Object(r.useState)({}),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),o=Object(i.a)(a,2),s=o[0],l=o[1],j=Object(r.useState)([]),d=Object(i.a)(j,2),p=d[0],b=d[1],h=Object(r.useState)({}),f=Object(i.a)(h,2),O=f[0],g=f[1],v=x((function(e){return e.setProjectModalOpen})),k=function(){var e=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.post("/addProject/",Object(M.a)(Object(M.a)({},n),{},{status:1}));case 3:e.sent,v(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response),g(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(y.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("/clients/");case 3:t=e.sent,l(t.data.map((function(e){return{value:e.id,image:e.image,short:e.short,text:e.name}}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(y.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("/types/");case 3:t=e.sent,console.log(t),b(t.data.map((function(e){return{value:e.id,text:e.name,short:e.short}}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){C(),S()}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H.a.Header,{children:"Neues Projekt"}),Object(m.jsx)(H.a.Content,{children:Object(m.jsxs)(I.a,{children:[Object(m.jsx)(I.a.Field,{label:"Title",control:K.a,error:O.name&&{content:O.name,pointing:"below"},onChange:function(e){return c((function(t){return Object(M.a)(Object(M.a)({},t),{},{title:e.target.value})}))},placeholder:"Title"}),Object(m.jsx)(I.a.Field,{selection:!0,label:"Typ",control:u.a,error:O.project_type&&{content:O.project_type,pointing:"below"},onChange:function(e,t){return c((function(e){return Object(M.a)(Object(M.a)({},e),{},{project_type:t.value})}))},fluid:!0,placeholder:"Projekttyp w\xe4hlen",options:p}),Object(m.jsx)(I.a.Field,{search:!0,selection:!0,control:u.a,label:"Kunde",error:O.client&&{content:O.client,pointing:"below"},onChange:function(e,t){return c((function(e){return Object(M.a)(Object(M.a)({},e),{},{client:t.value})}))},fluid:!0,placeholder:"Kunde ausw\xe4hlen",options:s})]})}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(F.a,{negative:!0,onClick:function(){return v(!1)},children:"Abbrechen"}),Object(m.jsx)(F.a,{positive:!0,onClick:function(){return k()},children:"Projekt anlegen"})]})]})},U=n(471);var q=function(){var e=x((function(e){return[e.projectModalOpen,e.setProjectModalOpen]})),t=Object(i.a)(e,2),n=t[0],c=(t[1],Object(r.useState)(!0)),a=Object(i.a)(c,2),o=a[0],s=a[1],u=Object(r.useState)(void 0),l=Object(i.a)(u,2),j=l[0],d=l[1],p=Object(r.useState)(void 0),b=Object(i.a)(p,2),h=b[0],f=b[1],O=x((function(e){return[e.allInvoices,e.setAllInvoices]})),g=Object(i.a)(O,2),v=(g[0],g[1],Object(r.useState)(0)),k=Object(i.a)(v,2),S=k[0],I=k[1],F=Object(r.useState)(void 0),A=Object(i.a)(F,2),E=A[0],_=A[1],P=Object(r.useState)(void 0),D=Object(i.a)(P,2),T=D[0],B=D[1],K=Object(r.useState)(void 0),q=Object(i.a)(K,2),G=q[0],W=q[1],J=Object(r.useState)(void 0),Z=Object(i.a)(J,2),Q=Z[0],X=Z[1],Y=function(){var e=Object(y.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("status");case 3:t=e.sent,f(t.data),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(y.a)(w.a.mark((function e(){var t,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("projects/");case 3:return t=e.sent,e.next=6,z.get("/invoicesall/");case 6:n=e.sent,r=t.data.map((function(e){var t=n.data.filter((function(t){return t.project===e.id})).map((function(e){return parseFloat(e.amount)}));return Object(M.a)(Object(M.a)({},e),{},{honorar:U.sum(t)})})),d(r),console.log(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){j&&h&&(s(!1),ee())}),[j,h]);var ee=function(){var e=j.filter((function(e){return 1!=e.status.order&&5!=e.status.order}));_(e.length),B(U.sum(e.map((function(e){return e.honorar}))));var t=j.filter((function(e){return 1==e.status.order}));W(t.length),X(U.sum(t.map((function(e){return e.honorar}))))};Object(r.useEffect)((function(){$(),Y()}),[n,S]);var te={display:"flex",alignItems:"center",justifyContent:"center"};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(C.a,{stackable:!0,columns:3,children:Object(m.jsxs)(C.a.Row,{stretched:!0,children:[Object(m.jsx)(C.a.Column,{width:12,children:Object(m.jsx)(N,{data:j,isLoading:o,status:h,rerenderfunc:function(){I((function(e){return e+1}))}})}),Object(m.jsxs)(C.a.Column,{width:4,children:[Object(m.jsx)(L.a,{loading:void 0==E,style:te,children:Object(m.jsxs)(R.a.Group,{size:"small",children:[Object(m.jsxs)(R.a,{size:"small",children:[Object(m.jsx)(R.a.Value,{children:E}),Object(m.jsx)(R.a.Label,{children:"Aktive Projekte trollo"})]}),Object(m.jsxs)(R.a,{size:"small",children:[Object(m.jsx)(R.a.Value,{children:E}),Object(m.jsx)(R.a.Label,{children:"Aktive Projekte"})]})]})}),Object(m.jsx)(L.a,{loading:void 0==T,style:te,children:Object(m.jsxs)(R.a.Group,{size:"small",children:[Object(m.jsxs)(R.a,{size:"small",children:[Object(m.jsx)(R.a.Value,{children:T&&T.toLocaleString("de")+" \u20ac"}),Object(m.jsx)(R.a.Label,{children:"Auftragssumme"})]}),Object(m.jsxs)(R.a,{size:"small",children:[Object(m.jsx)(R.a.Value,{children:T&&T.toLocaleString("de")+" \u20ac"}),Object(m.jsx)(R.a.Label,{children:"Auftragssumme"})]})]})}),Object(m.jsx)(L.a,{loading:void 0==G,style:te,children:Object(m.jsxs)(R.a,{size:"small",children:[Object(m.jsx)(R.a.Value,{children:G}),Object(m.jsx)(R.a.Label,{children:"Projekte in Aussicht"})]})}),Object(m.jsx)(L.a,{loading:void 0==Q,style:te,children:Object(m.jsxs)(R.a,{size:"small",children:[Object(m.jsx)(R.a.Value,{children:Q&&Q.toLocaleString("de")+" \u20ac"}),Object(m.jsx)(R.a.Label,{children:"Honorar in Aussicht"})]})})]})]})}),Object(m.jsx)(H.a,{open:n,children:Object(m.jsx)(V,{})})]})},G=n(694),W=n(501),J=n(491),Z=n.n(J),Q=n(492),X=n(493),Y=function(e){return new Promise((function(t,n){var r=new Image;r.addEventListener("load",(function(){return t(r)})),r.addEventListener("error",(function(e){return n(e)})),r.setAttribute("crossOrigin","anonymous"),r.src=e}))};function $(e){return e*Math.PI/180}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=Object(y.a)(w.a.mark((function e(t,n){var r,c,a,o,i,s,u,l=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:0,e.next=3,Y(t);case 3:return c=e.sent,a=document.createElement("canvas"),o=a.getContext("2d"),i=Math.max(c.width,c.height),s=i/2*Math.sqrt(2)*2,a.width=s,a.height=s,o.translate(s/2,s/2),o.rotate($(r)),o.translate(-s/2,-s/2),o.drawImage(c,s/2-.5*c.width,s/2-.5*c.height),u=o.getImageData(0,0,s,s),a.width=n.width,a.height=n.height,o.putImageData(u,Math.round(0-s/2+.5*c.width-n.x),Math.round(0-s/2+.5*c.height-n.y)),e.abrupt("return",new Promise((function(e){a.toBlob((function(t){e(URL.createObjectURL(t))}),"image/png")})));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=n(502);var re=function(){var e=Object(r.useState)({x:0,y:0}),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(1),o=Object(i.a)(a,2),s=o[0],u=o[1],l=Object(r.useState)(null),j=Object(i.a)(l,2),d=j[0],p=j[1],b=Object(r.useState)(),h=Object(i.a)(b,2),f=(h[0],h[1],x((function(e){return[e.cropImage,e.setCropImage]}))),O=Object(i.a)(f,2),g=(O[0],O[1]),v=x((function(e){return e.setCropModalOpen})),k=Object(r.useCallback)((function(e,t){p(t)}),[]),C=function(){var e=Object(y.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.imageq,e.prev=1,e.next=4,ee(t,d);case 4:n=e.sent,g(n),v(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),S={start:0,min:0,max:3,step:.01,onChange:function(e){u(e)}};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Q.Gluejar,{onError:function(e){return console.error(e)},children:function(e){var t=e.images;return window.imageq=t.slice(-1),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(L.a,{textAlign:"center",compact:!0,style:{padding:"1rem"},children:t.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(X.Slider,{style:{marginBottom:"1rem"},value:s,color:"red",settings:S}),Object(m.jsx)("div",{style:{position:"relative",height:"250px",width:"250px"},children:Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(ne.a,{cropSize:{width:200,height:200},image:window.imageq,crop:n,zoom:s,min:1,max:3,restrictPosition:!1,aspect:1,onCropChange:c,onCropComplete:k})})}),Object(m.jsx)(F.a,{style:{marginTop:"1rem"},onClick:function(){return C()},children:"Cut Image"})]}):Object(m.jsx)("div",{style:{height:"200px",width:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(m.jsx)("h4",{children:"Paste Image"})})})})}})})};var ce=function(){var e=x((function(e){return[e.cropModalOpen,e.setCropModalOpen]})),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(i.a)(a,2),s=o[0],l=o[1],j=Object(r.useState)(""),d=Object(i.a)(j,2),p=(d[0],d[1],Object(r.useState)({})),b=Object(i.a)(p,2),h=b[0],f=b[1],O=x((function(e){return e.cropImage})),g=x((function(e){return e.setOpenClient})),v=Object(r.useState)([]),k=Object(i.a)(v,2),C=k[0],S=k[1],A=Object(r.useState)(),E=Object(i.a)(A,2),_=E[0],M=E[1],P=function(){var e=Object(y.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("/artikel/");case 3:t=e.sent,console.log(t.data),S(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(y.a)(w.a.mark((function e(){var t,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(O),e.prev=1,t=new FormData,null==O){e.next=11;break}return e.next=6,fetch(O).then((function(e){return e.blob()})).then((function(e){return new File([e],"".concat(s,".png"),{type:"image/png"})}));case 6:return n=e.sent,e.next=9,Z()({file:n,width:300,height:300,type:"png"});case 9:r=e.sent,t.append("image",r);case 11:return t.append("name",s),t.append("artikel",_),e.next=15,z.post("/kunden/",t);case 15:g(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0.response),f(e.t0.response.data);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){P()}),[]),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{style:{width:"250px"},children:[Object(m.jsx)(W.a,{fluid:!0,src:O||"/smile.png",onClick:function(){return c(!0)},style:{cursor:"pointer",padding:"1rem"}}),Object(m.jsxs)(I.a,{children:[Object(m.jsx)(I.a.Field,{onChange:function(e){return l(e.target.value)},value:s,control:K.a,error:h.name&&{content:h.name,pointing:"below"},placeholder:"Name"}),Object(m.jsx)(I.a.Field,{selection:!0,control:u.a,onChange:function(e,t){return M(t.value)},fluid:!0,placeholder:"Artikel (z.B. das Klinikum)",options:C.map((function(e){return{value:e.id,text:e.nominativ}}))})]}),Object(m.jsx)(F.a,{onClick:function(){return D()},style:{display:"block",width:"100%",marginTop:".5rem"},content:"Erstellen"})]}),Object(m.jsxs)(H.a,{size:"mini",open:n,onClose:function(){return c(!1)},children:[Object(m.jsx)(H.a.Header,{children:"Trim Image"}),Object(m.jsx)(H.a.Content,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(m.jsx)(re,{})})]})]})};var ae=function(e){var t=e.data,n=x((function(e){return e.setOpenClient}));return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(B.a,{title:"Projektliste",columns:[{title:"Logo",field:"image",render:function(e){return Object(m.jsx)(W.a,{src:e.image,style:{height:"40px"},rounded:!0})}},{title:"Kunde",field:"name"},{title:"K\xfcrzel",field:"short"}],data:t,options:{actionsColumnIndex:-1,sorting:!0,exportButton:!0},actions:[{icon:"edit",tooltip:"Projektdetails",onClick:function(e,t){console.log(t)}},{icon:"delete",tooltip:"Projekt l\xf6schen",onClick:function(e,t){console.log(t)}},{icon:"add",isFreeAction:!0,onClick:function(){n(!0)}}]})})};var oe=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],a=(x((function(e){return e.cropImage})),x((function(e){return[e.openClient,e.setOpenClient]}))),o=Object(i.a)(a,2),s=o[0],u=o[1],l=function(){var e=Object(y.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("/clients/");case 3:t=e.sent,c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){l()}),[s]),Object(m.jsxs)("div",{children:[Object(m.jsx)(ae,{data:n}),Object(m.jsx)(G.a,{open:s,children:Object(m.jsxs)(L.a,{style:{left:0,right:0,marginLeft:"auto",marginRight:"auto",position:"fixed",width:"280px",top:"20%",zIndex:1e3},children:[Object(m.jsx)(S.a,{children:"Neuen Kunden anlegen"}),Object(m.jsx)(ce,{}),Object(m.jsx)(F.a,{style:{marginTop:".5rem"},fluid:!0,content:"Abbrechen",negative:!0,onClick:function(){return u(!1)}})]})})]})},ie=n(685),se=n(688),ue=n(678),le=n(679),je=n(495),de=n(471),pe=function(e){var t=e.filepath,n=e.filename,r=e.data,c=e.render,a=function(){var e=Object(y.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(y.a)(w.a.mark((function e(t,n,r){var c,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return c=e.sent,e.next=5,c.blob();case 5:return a=e.sent,e.abrupt("return",{_type:"image",source:a,format:a.type,width:n,height:r});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function i(e,t){var n=URL.createObjectURL(t),r=document.createElement("a");r.download=e,r.href=n,document.body.appendChild(r),r.click(),setTimeout((function(){r.remove(),window.URL.revokeObjectURL(n),r=null}),0)}var s=function(){var e=Object(y.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.keys(r).forEach((function(e){r[e]&&(de.isArray(r[e])?r[e].forEach((function(t,n){Object.keys(t).forEach((function(t){r[e][n][t].isImage&&o(r[e][n][t].url,r[e][n][t].width,r[e][n][t].height).then((function(c){return r[e][n][t]=c}))}))})):r[e].isImage&&o(r[e].url,r[e].width,r[e].height).then((function(t){return r[e]=t})))})),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c(function(){var e=Object(y.a)(w.a.mark((function e(){var r,c,o,u;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new je.a,e.next=3,a(t);case 3:return c=e.sent,e.next=6,s();case 6:return o=e.sent,e.next=9,r.process(c,o);case 9:u=e.sent,i(n,u);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())};pe.defaultProps={render:function(e){return Object(m.jsx)("button",{onClick:function(){return e()},children:"Word-Document"})}};var be=pe,he=n(307);var fe=function(){var e=Object(r.useState)({}),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)({}),o=Object(i.a)(a,2),s=o[0],u=(o[1],x((function(e){return[e.invoiceCreateModel,e.setInvoiceCreateModel]}))),l=Object(i.a)(u,2),j=(l[0],l[1]),d=x((function(e){return e.projectdata})),p=function(){var e=Object(y.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.post("/invoices/",Object(M.a)(Object(M.a)({},n),{},{project:d.id,status:1,invoice_number:"RN"}));case 3:t=e.sent,console.log(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:j(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){console.log(n)}),[n]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H.a.Header,{children:"Neue Rechnung"}),Object(m.jsx)(H.a.Content,{children:Object(m.jsxs)(I.a,{children:[Object(m.jsx)(I.a.Field,{label:"Rechnungsname",control:K.a,error:s.name&&{content:s.name,pointing:"below"},onChange:function(e){return c((function(t){return Object(M.a)(Object(M.a)({},t),{},{title:e.target.value})}))},placeholder:"Title"}),Object(m.jsxs)(I.a.Field,{children:[Object(m.jsx)("label",{children:"Rechnungsbetrag"}),Object(m.jsx)(he.a,{placeholder:"Betrag in \u20ac (netto)",value:n.amount,onValueChange:function(e){e.formattedValue;var t=e.value;c((function(e){return Object(M.a)(Object(M.a)({},e),{},{amount:t})}))},isNumericString:!0,decimalScale:2,thousandSeparator:".",decimalSeparator:",",prefix:"\u20ac ",customInput:K.a})]}),Object(m.jsx)(I.a.Field,{label:"Vorraussichtliche Rechnungsstellung",control:K.a,error:s.name&&{content:s.name,pointing:"below"},onChange:function(e){return c((function(t){return Object(M.a)(Object(M.a)({},t),{},{date_of_payment:e.target.value})}))},placeholder:"Title",type:"date"})]})}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(F.a,{negative:!0,onClick:function(){return j(!1)},children:"Disagree"}),Object(m.jsx)(F.a,{positive:!0,onClick:function(){return p()},children:"Agree"})]})]})};var Oe=function(e){var t=e.invoiceID,n=x((function(e){return e.invoices})).find((function(e){return e.id===t})),c=Object(r.useState)(Object(M.a)({},n)),a=Object(i.a)(c,2),o=a[0],s=a[1],l=Object(r.useState)({}),j=Object(i.a)(l,2),d=j[0],p=(j[1],x((function(e){return[e.invoiceEditModel,e.setInvoiceEditModel]}))),b=Object(i.a)(p,2),h=(b[0],b[1]),f=x((function(e){return[e.invoiceStati,e.setInvoiceStati]})),O=Object(i.a)(f,2),g=O[0],v=(O[1],function(){var e=Object(y.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.put("invoices/".concat(n.id),Object(M.a)({},o));case 3:t=e.sent,console.log(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:h(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}());return Object(r.useEffect)((function(){console.log(o)}),[o]),Object(r.useEffect)((function(){console.log(g),console.log(n)}),[g]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H.a.Header,{children:"Neue Rechnung"}),Object(m.jsx)(H.a.Content,{children:Object(m.jsxs)(I.a,{children:[Object(m.jsx)(I.a.Field,{label:"Rechnungsname",control:K.a,value:o.title,error:d.name&&{content:d.name,pointing:"below"},onChange:function(e){return s((function(t){return Object(M.a)(Object(M.a)({},t),{},{title:e.target.value})}))},placeholder:"Title"}),Object(m.jsxs)(I.a.Field,{children:[Object(m.jsx)("label",{children:"Rechnungsbetrag"}),Object(m.jsx)(he.a,{placeholder:"Betrag in \u20ac (netto)",value:o.amount,onValueChange:function(e){console.log(e);e.formattedValue;var t=e.value;s((function(e){return Object(M.a)(Object(M.a)({},e),{},{amount:t})}))},isNumericString:!0,decimalScale:2,thousandSeparator:".",decimalSeparator:",",prefix:"\u20ac ",customInput:K.a})]}),Object(m.jsx)(I.a.Field,{selection:!0,label:"Status",control:u.a,value:o.status,error:d.project_type&&{content:d.project_type,pointing:"below"},onChange:function(e,t){return s((function(e){return Object(M.a)(Object(M.a)({},e),{},{status:t.value})}))},fluid:!0,placeholder:"Projekttyp w\xe4hlen",options:g}),Object(m.jsx)(I.a.Field,{label:"Vorraussichtlicher Zahlungseingang",control:K.a,value:o.date_of_payment,error:d.name&&{content:d.name,pointing:"below"},onChange:function(e){return s((function(t){return Object(M.a)(Object(M.a)({},t),{},{date_of_payment:e.target.value})}))},placeholder:"Title",type:"date"})]})}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(F.a,{negative:!0,onClick:function(){return h(!1)},children:"Disagree"}),Object(m.jsx)(F.a,{positive:!0,onClick:function(){return v()},children:"Agree"})]})]})},xe=n.p+"static/media/re_vorlage.0c790b2b.docx";var ge=function(e){var t=e.projectID,n=new Intl.NumberFormat("de",{style:"currency",currency:"EUR"}),c=x((function(e){return[e.invoices,e.setInvoices]})),a=Object(i.a)(c,2),o=a[0],s=a[1],u=x((function(e){return[e.invoiceCreateModel,e.setInvoiceCreateModel]})),l=Object(i.a)(u,2),d=l[0],p=l[1],b=x((function(e){return[e.invoiceEditModel,e.setInvoiceEditModel]})),h=Object(i.a)(b,2),f=h[0],O=h[1],g=x((function(e){return[e.invoiceStati,e.setInvoiceStati]})),v=Object(i.a)(g,2),k=v[0],C=v[1],S=Object(r.useState)([]),I=Object(i.a)(S,2),A=I[0],E=I[1],_=x((function(e){return e.projectdata})),P=function(){var e=Object(y.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("/artikel/");case 3:t=e.sent,E(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(y.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("/invoicestatus/");case 3:t=e.sent,C(t.data.map((function(e){return{value:e.id,text:e.name,icon:e.icontext}}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),L=Object(r.useState)(!0),R=Object(i.a)(L,2),T=R[0],N=R[1],K=Object(r.useState)(!1),V=Object(i.a)(K,2),U=V[0],q=V[1],G=Object(r.useState)({}),W=Object(i.a)(G,2),J=W[0],Z=W[1],Q=function(){var e=Object(y.a)(w.a.mark((function e(){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("invoices",{params:{id:t}});case 3:n=e.sent,s(n.data),N(!1),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(y.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.delete("invoices/".concat(t));case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 8:q(!1);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(y.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=o.findIndex((function(e){return e.id===t})),e.next=4,z.put("invoices/".concat(t),Object(M.a)(Object(M.a)({},o[n]),{},{status:3===o[n].status?1:o[n].status+1}));case 4:r=e.sent,s(o.map((function(e,t){return t===n?r.data:e}))),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){D(),P()}),[]),Object(r.useEffect)((function(){Q()}),[d,U,f]),Object(r.useEffect)((function(){console.log(o)}),[o]),Object(m.jsxs)(m.Fragment,{children:[T?Object(m.jsx)(se.a,{active:!0,inverted:!0,children:Object(m.jsx)(ue.a,{size:"medium",children:"Loading"})}):Object(m.jsx)(B.a,{title:"Rechnungen",style:{boxShadow:"none"},columns:[{title:"Name",field:"title"},{title:"RN",field:"invoice_number"},{title:"Betrag",field:"amount",type:"currency",currencySetting:{locale:"de",currencyCode:"EUR"}},{title:"Status",field:"status",render:function(e){var t=k.find((function(t){return t.value===e.status}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("span",{style:{marginRight:".2rem"},children:t&&t.text}),Object(m.jsx)(j.a,{color:t&&3===t.value?"green":t&&2===t.value?"yellow":"black",name:t&&t.icon})]})}},{title:"Stellung",field:"date_of_invoicing",type:"date"},{title:"Eingang",field:"date_of_payment",type:"date",render:function(e){var t=new Date(e.date_of_payment).toLocaleDateString("de");return Object(m.jsx)("span",{style:{color:3===e.status?"#016936":"#FFD700"},children:t})}}],actions:[{icon:"word",color:"grey",tooltip:"status",onClick:function(e,t){Y(t.id)}},{icon:"edit",color:"blue",tooltip:"Bearbeiten",onClick:function(e,t){Z(t),O(!0)}},{icon:"delete",color:"red",tooltip:"Rechnung l\xf6schen",onClick:function(e,t){Z(t),q(!0)}},{icon:"add",tooltip:"Neue Rechnung",color:"grey",isFreeAction:!0,onClick:function(e){return p(!0)}}],components:{Action:function(e){var t=e.data,r=A.find((function(e){return _.client&&e.id===_.client.artikel})),c=[];_.part&&c.push({item:_.part}),_.contact&&c.push({item:_.contact}),_.street&&c.push({item:_.street}),_.plz&&_.place&&c.push({item:_.plz+" "+_.place});var a={date:(new Date).toLocaleDateString("de"),logo:{isImage:!0,url:_.client&&_.client.image,width:20,height:20},invoice_number:t.invoice_number,netto:n.format(t.amount),tax:n.format(.19*t.amount),brutto:n.format(1.19*t.amount),clientname:_.client&&_.client.name,project_number:_.project_number,title:_.title,artikel:r&&r.nominativ,street:_.street,plz:_.plz,place:_.place,contact:_.contact,adresse:c,part:_.part,contactSalut:_.contact?"Herr"===_.contact.substring(0,4)?"sehr geehrter ".concat(_.contact):"Frau"===_.contact.substring(0,4)?"sehr geehrte ".concat(_.contact):"":"Sehr geehrte Damen und Herren"};return"word"===e.action.icon?Object(m.jsx)(be,{filepath:xe,filename:"".concat(t.invoice_number,".docx"),data:a,render:function(e){return Object(m.jsx)(j.a,{name:"file word",size:"large",color:"blue",style:{cursor:"pointer"},onClick:function(){return e()}})}}):Object(m.jsx)(le.a,{content:e.action.tooltip,trigger:Object(m.jsx)(j.a,{color:e.action.color,style:{cursor:"pointer"},size:"large",name:e.action.icon,onClick:function(t){return e.action.onClick(t,e.data)}})})}},data:o,options:{actionsColumnIndex:-1,sorting:!0,showTitle:!0,toolbar:!0,pageSize:4,search:!1,pageSizeOptions:[]}}),Object(m.jsxs)(H.a,{open:U,onClose:function(){return q(!1)},children:[Object(m.jsx)(H.a.Header,{children:"Rechnung l\xf6schen"}),Object(m.jsxs)(H.a.Content,{children:["Rechnung ",J.title," wirklich l\xf6schen ?"]}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(F.a,{negative:!0,onClick:function(){return q(!1)},children:"Disagree"}),Object(m.jsx)(F.a,{positive:!0,onClick:function(){return X(J.id)},children:"Agree"})]})]}),Object(m.jsx)(H.a,{open:f,onClose:function(){return O(!1)},children:Object(m.jsx)(Oe,{invoiceID:J.id})}),Object(m.jsx)(H.a,{open:d,onClose:function(){return p(!1)},children:Object(m.jsx)(fe,{})})]})},me=n(475);var ve=function(e){var t=e.projectID,n=x((function(e){return[e.projectdata,e.setProjectdata]})),c=Object(i.a)(n,2),a=c[0],o=c[1],s=x((function(e){return[e.projectsteps,e.setProjectsteps]})),u=Object(i.a)(s,2),l=u[0],d=u[1],p=function(){var e=Object(y.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("status");case 3:t=e.sent,d(t.data),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(y.a)(w.a.mark((function e(n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.put("projects/".concat(t,"/"),{status:n,title:a.title,project_number:a.project_number});case 3:r=e.sent,o(r.data),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0.response),e.abrupt("return",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),h=l.map((function(e){return me.isEmpty(a)?null:Object(m.jsxs)(ie.a,{completed:a.status>=e.order,active:a.status+1===e.order,onClick:function(){return b(e.order)},children:[Object(m.jsx)(j.a,{name:e.icontext}),Object(m.jsxs)(ie.a.Content,{children:[Object(m.jsx)(ie.a.Title,{children:e.name}),Object(m.jsx)(ie.a.Description,{children:e.subtext})]})]},e.id)}));return Object(r.useEffect)((function(){p()}),[]),Object(m.jsx)(m.Fragment,{children:h})},ke=n(684);var we=function(){var e=Object(d.g)(),t=x((function(e){return e.projectdata})),n=x((function(e){return[e.editModalOpen,e.setEditModalOpen]})),c=Object(i.a)(n,2),a=(c[0],c[1]),o=Object(r.useState)({title:t.title,place:t.place,street:t.street,plz:t.plz,part:t.part,contact:t.contact&&t.contact.substring(5),client:t.client.id}),s=Object(i.a)(o,2),l=s[0],j=s[1],p=[{value:1,text:"Herr"},{value:2,text:"Frau"}],b=Object(r.useState)(t.contact&&"Herr"===t.contact.substring(0,4)?p[0]:p[1]),h=Object(i.a)(b,2),f=h[0],O=h[1],g=Object(r.useState)([]),v=Object(i.a)(g,2),k=v[0],C=v[1],S=Object(r.useState)(""),A=Object(i.a)(S,2),E=A[0],_=(A[1],function(){var e=Object(y.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("/clients/");case 3:t=e.sent,C(t.data.map((function(e){return{value:e.id,image:e.image,short:e.short,text:e.name}}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()),P=function(){var n=Object(y.a)(w.a.mark((function n(){return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,z.put("/projectupdate/".concat(t.id,"/"),Object(M.a)(Object(M.a)({},l),{},{title:l.title,client:l.client,contact:l.contact?f.text+" "+l.contact:null,place:l.place?l.place:null,street:l.street?l.street:null,plz:l.plz?l.plz:null,part:l.part?l.part:null}));case 3:n.sent,n.next=11;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0),401===n.t0.response.status&&e.push("/login"),console.log(n.t0.response);case 11:a(!1);case 12:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){_()}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(H.a.Header,{children:["Projekt: ",Object(m.jsx)("span",{style:{color:"red"},children:t.title})]}),Object(m.jsx)(H.a.Content,{children:Object(m.jsxs)(I.a,{children:[Object(m.jsx)(I.a.Field,{label:"Title",control:K.a,value:l.title,error:E.name&&{content:E.name,pointing:"below"},onChange:function(e){return j((function(t){return Object(M.a)(Object(M.a)({},t),{},{title:e.target.value})}))},placeholder:"Title"}),Object(m.jsx)(I.a.Field,{search:!0,selection:!0,control:u.a,value:l.client,label:"Kunde",error:E.client&&{content:E.client,pointing:"below"},onChange:function(e,t){return j((function(e){return Object(M.a)(Object(M.a)({},e),{},{client:t.value})}))},options:k,fluid:!0,placeholder:"Kunde ausw\xe4hlen"}),Object(m.jsx)(I.a.Field,{label:"Ort",control:K.a,value:l.place,onChange:function(e){return j((function(t){return Object(M.a)(Object(M.a)({},t),{},{place:e.target.value})}))},placeholder:"Ort"}),Object(m.jsx)(I.a.Field,{label:"Stra\xdfe + Hausnummer",control:K.a,value:l.street,onChange:function(e){return j((function(t){return Object(M.a)(Object(M.a)({},t),{},{street:e.target.value})}))},placeholder:"Stra\xdfe"}),Object(m.jsxs)(I.a.Group,{children:[Object(m.jsx)(I.a.Field,{width:4,selection:!0,control:u.a,value:f.value,label:"Anrede",error:E.client&&{content:E.client,pointing:"below"},onChange:function(e,t){O(1===t.value?p[0]:p[1])},options:[{value:1,text:"Herr"},{value:2,text:"Frau"}],fluid:!0}),Object(m.jsx)(I.a.Field,{width:12,label:"Kontaktperson",control:K.a,value:l.contact,onChange:function(e){return j((function(t){return Object(M.a)(Object(M.a)({},t),{},{contact:e.target.value})}))},placeholder:"z.B. Dr. M\xfcller"})]}),Object(m.jsx)(I.a.Field,{label:"Abteilung",control:K.a,value:l.part,onChange:function(e){return j((function(t){return Object(M.a)(Object(M.a)({},t),{},{part:e.target.value})}))},placeholder:"z.B. Herr Dr. M\xfcller"}),Object(m.jsx)(I.a.Field,{label:"Postleitzahl",control:K.a,value:l.plz,onChange:function(e){return j((function(t){return Object(M.a)(Object(M.a)({},t),{},{plz:e.target.value})}))},placeholder:"plz"})]})}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(F.a,{negative:!0,onClick:function(){return a(!1)},children:"Abbrechen"}),Object(m.jsx)(F.a,{positive:!0,onClick:function(){return P()},children:"Projekt updated"})]})]})},ye=n(475);var Ce=function(e){var t=e.projectID,n=x((function(e){return[e.projectdata,e.setProjectdata]})),c=Object(i.a)(n,2),a=c[0],o=c[1],s=x((function(e){return[e.editModalOpen,e.setEditModalOpen]})),u=Object(i.a)(s,2),l=u[0],d=u[1],p=x((function(e){return e.invoices})),b=0;p.forEach((function(e){return b+=parseFloat(e.amount)}));var h=function(){var e=Object(y.a)(w.a.mark((function e(){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get("projects/".concat(t,"/"));case 3:n=e.sent,o(n.data),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),f=new Date(a.created_at).toLocaleDateString("de",{hour:"numeric",minute:"numeric"});return Object(r.useEffect)((function(){h()}),[l]),ye.isEmpty(a)?Object(m.jsx)(se.a,{active:!0,inverted:!0,children:Object(m.jsx)(ue.a,{size:"medium",children:"Loading"})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(ke.a,{divided:!0,relaxed:!0,children:[Object(m.jsx)(ke.a.Item,{children:Object(m.jsxs)(ke.a.Content,{children:[Object(m.jsx)(ke.a.Header,{as:"h2",children:a.title}),Object(m.jsxs)(ke.a.Description,{as:"p",children:[Object(m.jsx)("strong",{children:"Erstellt:"})," ",f]})]})}),Object(m.jsxs)(ke.a.Item,{children:[Object(m.jsx)(W.a,{rounded:!0,style:{width:"23.625px",marginRight:"6px"},src:a.client.image}),Object(m.jsx)(ke.a.Content,{children:Object(m.jsx)(ke.a.Header,{as:"h3",children:a.client.name})})]}),Object(m.jsxs)(ke.a.Item,{children:[Object(m.jsx)(ke.a.Icon,{name:"eur",size:"large",verticalAlign:"middle"}),Object(m.jsxs)(ke.a.Content,{children:[Object(m.jsx)(ke.a.Header,{style:{marginLeft:"11px"},as:"h4",children:"Honorar"}),Object(m.jsx)(ke.a.Description,{style:{marginLeft:"11px"},children:Object(m.jsx)("strong",{style:{color:"green"},children:b.toLocaleString("de")+" \u20ac"})})]})]}),Object(m.jsxs)(ke.a.Item,{children:[Object(m.jsx)(ke.a.Icon,{name:"map",size:"large",verticalAlign:"middle"}),Object(m.jsxs)(ke.a.Content,{children:[Object(m.jsx)(ke.a.Header,{as:"h4",children:"Anschrift"}),Object(m.jsxs)(ke.a.Description,{children:[Object(m.jsx)("strong",{children:"Stra\xdfe: "}),a.street," ",a.street&&Object(m.jsx)(j.a,{color:"green",name:"check"})]}),Object(m.jsxs)(ke.a.Description,{children:[Object(m.jsx)("strong",{children:"Plz: "}),a.plz," ",a.plz&&Object(m.jsx)(j.a,{color:"green",name:"check"})]}),Object(m.jsxs)(ke.a.Description,{children:[Object(m.jsx)("strong",{children:"Ort: "}),a.place," ",a.place&&Object(m.jsx)(j.a,{color:"green",name:"check"})]}),Object(m.jsxs)(ke.a.Description,{children:[Object(m.jsx)("strong",{children:"Kontakt: "}),a.contact," ",a.contact&&Object(m.jsx)(j.a,{color:"green",name:"check"})]}),Object(m.jsxs)(ke.a.Description,{children:[Object(m.jsx)("strong",{children:"Abteilung: "}),a.part," ",a.part&&Object(m.jsx)(j.a,{color:"green",name:"check"})]})]})]}),Object(m.jsx)(ke.a.Item,{children:Object(m.jsxs)(ke.a.Content,{children:[Object(m.jsx)(F.a,{style:{marginBottom:".3rem"},icon:"edit",content:"edit",onClick:function(){return d(!0)}}),Object(m.jsx)(be,{filepath:"/test.docx",filename:"asdqwe.docx",data:{loop:[{name:"rene",image:{isImage:!0,url:"/smile.png",width:200,height:200}},{name:"couti",image:{isImage:!0,url:"/logo512.png",width:200,height:200}}],asdqwe:{isImage:!0,url:"/logo512.png",width:200,height:200},qwe2:"Hello World"},render:function(e){return Object(m.jsx)(F.a,{icon:"file word",content:"offer",color:"blue",style:{marginBottom:".3rem"},onClick:function(){return e()}})}})]})})]}),Object(m.jsx)(H.a,{open:l,children:Object(m.jsx)(we,{})})]})};var Se=function(e){var t=e.match.params.id;return Object(m.jsx)(C.a,{stackable:!0,columns:3,children:Object(m.jsxs)(C.a.Row,{style:{minHeight:"343px"},stretched:!0,children:[Object(m.jsx)(C.a.Column,{computer:4,tablet:16,children:Object(m.jsx)(L.a,{children:Object(m.jsx)(Ce,{projectID:t})})}),Object(m.jsx)(C.a.Column,{computer:4,tablet:16,children:Object(m.jsx)(L.a,{children:Object(m.jsx)(ie.a.Group,{fluid:!0,vertical:!0,children:Object(m.jsx)(ve,{projectID:t})})})}),Object(m.jsx)(C.a.Column,{computer:8,tablet:16,children:Object(m.jsx)(L.a,{children:Object(m.jsx)(ge,{projectID:t})})})]})})};var Ie=function(){return Object(m.jsx)(p.a,{children:Object(m.jsx)(v,{children:Object(m.jsx)("div",{style:{margin:"2rem"},children:Object(m.jsxs)(d.d,{children:[Object(m.jsx)(D,{exact:!0,path:"/",component:q}),Object(m.jsx)(D,{exact:!0,path:"/clients",component:oe}),Object(m.jsx)(D,{exact:!0,path:"/projects/:id",component:Se}),Object(m.jsx)(d.b,{exact:!0,path:"/login",children:Object(m.jsx)(_,{})})]})})})})};o.a.render(Object(m.jsx)(Ie,{}),document.getElementById("root"))}},[[630,1,2]]]);
//# sourceMappingURL=main.0277a372.chunk.js.map