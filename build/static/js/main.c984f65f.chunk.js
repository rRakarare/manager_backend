(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{531:function(e,t,n){},631:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(22),o=n.n(a),i=(n(531),n(532),n(269)),s=n(10),u=n(682),l=n(681),j=n(691),d=n(123),p=n(40),b=n(87),f=n(487),h=n(488),O=n(270);function x(){var e=localStorage.getItem("access_token");return!!e&&Object(O.a)(e).exp>(new Date).getTime()/1e3}var g=Object(f.a)(Object(h.devtools)((function(e){return{auth:x(),setAuth:function(t){return e((function(e){return{auth:t}}))},invoices:[],setInvoices:function(t){return e((function(e){return{invoices:t}}))},allIinvoices:[],setAllInvoices:function(t){return e((function(e){return{allInvoices:t}}))},invoiceStati:[],setInvoiceStati:function(t){return e((function(e){return{invoiceStati:t}}))},projectsteps:[],setProjectsteps:function(t){return e((function(e){return{projectsteps:t}}))},projectHonorar:[],setProjectHonorar:function(t){return e((function(e){return{projectHonorar:t}}))},projectdata:{},setProjectdata:function(t){return e((function(e){return{projectdata:t}}))},editClientData:{},setEditClientData:function(t){return e((function(e){return{editClientData:t}}))},cropImage:null,setCropImage:function(t){return e((function(e){return{cropImage:t}}))},cropModalOpen:!1,setCropModalOpen:function(t){return e((function(e){return{cropModalOpen:t}}))},openClient:!1,setOpenClient:function(t){return e((function(e){return{openClient:t}}))},projectModalOpen:!1,setProjectModalOpen:function(t){return e((function(e){return{projectModalOpen:t}}))},editModalOpen:!1,setEditModalOpen:function(t){return e((function(e){return{editModalOpen:t}}))},invoiceCreateModel:!1,setInvoiceCreateModel:function(t){return e((function(e){return{invoiceCreateModel:t}}))},invoiceEditModel:!1,setInvoiceEditModel:function(t){return e((function(e){return{invoiceEditModel:t}}))},createOfferModel:!1,setCreateOfferModel:function(t){return e((function(e){return{createOfferModel:t}}))}}}))),v=n.p+"static/media/ubc.ebb132ce.svg",m=n(3);var k=function(e){var t=e.children,n=c.a.useState(!1),r=Object(s.a)(n,2),a=r[0],o=r[1],f=g((function(e){return e.auth})),h=g((function(e){return e.setAuth})),O=Object(p.g)(),x=localStorage.getItem("profile_name"),k=Object(i.useMediaQuery)({query:"(max-width: 1224px)"}),w=Object(m.jsx)(u.a.Menu,{position:"right",children:Object(m.jsx)(l.a,{item:!0,text:x,children:Object(m.jsxs)(l.a.Menu,{children:[Object(m.jsx)(l.a.Item,{children:"Profile"}),Object(m.jsx)(l.a.Item,{onClick:function(){return h(!1),localStorage.removeItem("access_token"),localStorage.removeItem("profile_name"),void O.push("/login")},children:"Logout"})]})})});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:Object(m.jsxs)(u.a,{style:{margin:0},fixed:"top",children:[Object(m.jsx)(u.a.Item,{onClick:function(){o(!a)},children:Object(m.jsx)("i",{className:"fas fa-bars"})}),Object(m.jsx)(b.b,{to:"/",children:Object(m.jsx)(u.a.Item,{children:Object(m.jsx)("img",{style:{width:"80px"},src:v,alt:"logo"})})}),f?w:null]})}),Object(m.jsxs)(j.a.Pushable,{style:{},children:[Object(m.jsxs)(j.a,{as:u.a,animation:"push",icon:"labeled",vertical:!0,visible:a,width:"thin",style:{backgroundColor:"white",paddingTop:53.63},children:[Object(m.jsxs)(u.a.Item,{as:b.b,to:"/",children:[Object(m.jsx)(d.a,{name:"clipboard"}),"Projekte"]}),Object(m.jsxs)(u.a.Item,{as:b.b,to:"/clients",children:[Object(m.jsx)(d.a,{name:"address book"}),"Kunden"]}),Object(m.jsxs)(u.a.Item,{as:b.b,to:"/invoices",children:[Object(m.jsx)(d.a,{name:"eur"}),"Rechungen"]})]}),Object(m.jsx)(j.a.Pusher,{style:{overflow:"scroll",height:"100vh",paddingTop:53.63,transition:"400ms",paddingRight:a&&!k?148:0},children:t})]})]})},w=n(7),y=n.n(w),C=n(12),S=n(692),I=n(693),_=n(683),E=n(646),D=n(154),F=n.n(D).a.create({baseURL:"https://ubcdata.herokuapp.com/api/",timeout:5e3,headers:{"Content-Type":"application/json",accept:"application/json"}});F.interceptors.request.use(function(){var e=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=localStorage.getItem("access_token"))&&(t.headers.Authorization="Bearer ".concat(n)),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),F.interceptors.response.use((function(e){return e}),(function(e){if(401!==e.response.status)return Promise.reject(e);window.location.reload(!0)}));var P=F;var A=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(s.a)(a,2),i=o[0],u=o[1],l=Object(r.useState)(""),j=Object(s.a)(l,2),d=j[0],b=j[1],f=g((function(e){return[e.auth,e.setAuth]})),h=Object(s.a)(f,2),x=(h[0],h[1]),v=Object(p.g)(),k=function(){var e=Object(C.a)(y.a.mark((function e(){var t,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.post("token",{username:n,password:i});case 3:200===(t=e.sent).status&&(localStorage.setItem("access_token",t.data.access),localStorage.setItem("refresh_token",t.data.refresh),P.defaults.headers.Authorization="JWT "+localStorage.getItem("access_token"),r=Object(O.a)(t.data.access).name,localStorage.setItem("profile_name",r),x(!0),v.push("/")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response.data),b(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(S.a,{textAlign:"center",style:{height:"80%",maxWidth:"100%"},verticalAlign:"middle",children:Object(m.jsxs)(S.a.Column,{style:{maxWidth:420},children:[Object(m.jsx)(I.a,{as:"h2",color:"teal",textAlign:"center",children:"UBCDATA Log-in to your account"}),Object(m.jsxs)(_.a,{size:"large",children:[Object(m.jsx)(_.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"username",value:n,onChange:function(e){return c(e.target.value)}}),Object(m.jsx)(_.a.Input,{fluid:!0,error:d.detail&&{content:d.detail},icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",value:i,onChange:function(e){return u(e.target.value)}}),Object(m.jsx)(E.a,{onClick:function(){return k()},color:"teal",fluid:!0,size:"large",children:"Login"})]})]})})},M=n(17),R=n(501);var z=function(e){var t=e.component,n=Object(R.a)(e,["component"]),c=g((function(e){return e.auth})),a=g((function(e){return e.setAuth}));return Object(r.useEffect)((function(){c&&a(x())}),[]),Object(m.jsx)(p.b,Object(M.a)(Object(M.a)({},n),{},{render:function(e){return c?Object(m.jsx)(t,Object(M.a)(Object(M.a)({},n),e)):Object(m.jsx)(p.a,{to:"/login"})}}))},L=n(694),T=n(688),H=n(684),B=n(118),N=n.n(B);var V=function(e){var t=e.data,n=e.status,c=e.isLoading,a=e.rerenderfunc,o=Object(r.useState)(!1),i=Object(s.a)(o,2),u=i[0],l=i[1],j=Object(r.useState)({}),d=Object(s.a)(j,2),b=d[0],f=d[1],h=g((function(e){return[e.allInvoices,e.setAllInvoices]})),O=Object(s.a)(h,2),x=(O[0],O[1],Object(p.g)()),v=g((function(e){return e.setProjectModalOpen})),k=function(){var e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.delete("/projects/".concat(b.id));case 3:a(),l(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),w={},S=[];return c||(n.forEach((function(e){w[e.id]=e.name})),S=t.map((function(e){var t=new Date(e.created_at).toLocaleDateString("de",{hour:"numeric",minute:"numeric"});return{id:e.id,title:e.title,project_number:e.project_number,client:e.client&&e.client.name,created_at:t,status:e.status&&e.status.id,honorar:e.honorar}}))),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(N.a,{isLoading:c,title:"Projektliste",columns:[{title:"Nr.",field:"project_number"},{title:"Titel",field:"title"},{title:"Kunde",field:"client"},{title:"Erstellt",field:"created_at",type:"datetime"},{title:"Status",field:"status",lookup:w},{title:"Honorar",field:"honorar",type:"currency",currencySetting:{locale:"de",currencyCode:"EUR"}}],data:S,options:{actionsColumnIndex:-1,sorting:!0,filtering:!0,exportButton:!0,pageSize:10},actions:[{icon:"edit",tooltip:"Projektdetails",onClick:function(e,t){x.push("/projects/".concat(t.id))}},{icon:"add",tooltip:"Neues Projekt",isFreeAction:!0,onClick:function(){v(!0)}},{icon:"delete",tooltip:"Projekt l\xf6schen",onClick:function(e,t){console.log(t),f(t),l(!0)}}]}),Object(m.jsxs)(H.a,{open:u,onClose:function(){return l(!1)},children:[Object(m.jsx)(H.a.Header,{children:"Projekt l\xf6schen"}),Object(m.jsxs)(H.a.Content,{children:["Das Project"," ",Object(m.jsxs)("strong",{children:[b.title," (",b.client,")"]})," ","wirklich l\xf6schen ?"]}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(E.a,{negative:!0,onClick:function(){return l(!1)},children:"Abbrechen"}),Object(m.jsx)(E.a,{positive:!0,onClick:function(){return k()},children:"L\xf6schen"})]})]})]})},K=n(668);var U=function(){var e=Object(r.useState)({}),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),o=Object(s.a)(a,2),i=o[0],u=o[1],j=Object(r.useState)([]),d=Object(s.a)(j,2),p=d[0],b=d[1],f=Object(r.useState)({}),h=Object(s.a)(f,2),O=h[0],x=h[1],v=g((function(e){return e.setProjectModalOpen})),k=function(){var e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.post("/addProject/",Object(M.a)(Object(M.a)({},n),{},{status:1}));case 3:e.sent,v(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response),x(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/clients/");case 3:t=e.sent,u(t.data.map((function(e){return{value:e.id,image:e.image,short:e.short,text:e.name}}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/types/");case 3:t=e.sent,console.log(t),b(t.data.map((function(e){return{value:e.id,text:e.name,short:e.short}}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){w(),S()}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H.a.Header,{children:"Neues Projekt"}),Object(m.jsx)(H.a.Content,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Field,{label:"Title",control:K.a,error:O.name&&{content:O.name,pointing:"below"},onChange:function(e){return c((function(t){return Object(M.a)(Object(M.a)({},t),{},{title:e.target.value})}))},placeholder:"Title"}),Object(m.jsx)(_.a.Field,{selection:!0,label:"Typ",control:l.a,error:O.project_type&&{content:O.project_type,pointing:"below"},onChange:function(e,t){return c((function(e){return Object(M.a)(Object(M.a)({},e),{},{project_type:t.value})}))},fluid:!0,placeholder:"Projekttyp w\xe4hlen",options:p}),Object(m.jsx)(_.a.Field,{search:!0,selection:!0,control:l.a,label:"Kunde",error:O.client&&{content:O.client,pointing:"below"},onChange:function(e,t){return c((function(e){return Object(M.a)(Object(M.a)({},e),{},{client:t.value})}))},fluid:!0,placeholder:"Kunde ausw\xe4hlen",options:i})]})}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(E.a,{negative:!0,onClick:function(){return v(!1)},children:"Abbrechen"}),Object(m.jsx)(E.a,{positive:!0,onClick:function(){return k()},children:"Projekt anlegen"})]})]})},q=n(473);var Z=function(){var e=g((function(e){return[e.projectModalOpen,e.setProjectModalOpen]})),t=Object(s.a)(e,2),n=t[0],c=(t[1],Object(r.useState)(!0)),a=Object(s.a)(c,2),o=a[0],i=a[1],u=Object(r.useState)(void 0),l=Object(s.a)(u,2),j=l[0],d=l[1],p=Object(r.useState)(void 0),b=Object(s.a)(p,2),f=b[0],h=b[1],O=g((function(e){return[e.allInvoices,e.setAllInvoices]})),x=Object(s.a)(O,2),v=(x[0],x[1],Object(r.useState)(0)),k=Object(s.a)(v,2),w=k[0],I=k[1],_=Object(r.useState)(void 0),E=Object(s.a)(_,2),D=E[0],F=E[1],A=Object(r.useState)(void 0),R=Object(s.a)(A,2),z=R[0],B=R[1],N=Object(r.useState)(void 0),K=Object(s.a)(N,2),Z=K[0],W=K[1],G=Object(r.useState)(void 0),J=Object(s.a)(G,2),Q=J[0],X=J[1],Y=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("status");case 3:t=e.sent,h(t.data),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(C.a)(y.a.mark((function e(){var t,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("projects/");case 3:return t=e.sent,e.next=6,P.get("/invoicesall/");case 6:n=e.sent,r=t.data.map((function(e){var t=n.data.filter((function(t){return t.project===e.id})).map((function(e){return parseFloat(e.amount)}));return Object(M.a)(Object(M.a)({},e),{},{honorar:q.sum(t)})})),d(r),console.log(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){j&&f&&(i(!1),ee())}),[j,f]);var ee=function(){var e=j.filter((function(e){return 1!=e.status.order&&5!=e.status.order}));F(e.length),B(q.sum(e.map((function(e){return e.honorar}))));var t=j.filter((function(e){return 1==e.status.order}));W(t.length),X(q.sum(t.map((function(e){return e.honorar}))))};Object(r.useEffect)((function(){$(),Y()}),[n,w]);var te={display:"flex",alignItems:"center",justifyContent:"center"};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(S.a,{stackable:!0,columns:3,children:Object(m.jsxs)(S.a.Row,{stretched:!0,children:[Object(m.jsx)(S.a.Column,{width:12,children:Object(m.jsx)(V,{data:j,isLoading:o,status:f,rerenderfunc:function(){I((function(e){return e+1}))}})}),Object(m.jsxs)(S.a.Column,{width:4,children:[Object(m.jsx)(L.a,{loading:void 0==D,style:te,children:Object(m.jsxs)(T.a,{size:"small",children:[Object(m.jsx)(T.a.Value,{children:D}),Object(m.jsx)(T.a.Label,{children:"Aktive Projekte"})]})}),Object(m.jsx)(L.a,{loading:void 0==z,style:te,children:Object(m.jsxs)(T.a,{size:"small",children:[Object(m.jsx)(T.a.Value,{children:z&&z.toLocaleString("de")+" \u20ac"}),Object(m.jsx)(T.a.Label,{children:"Auftragssumme"})]})}),Object(m.jsx)(L.a,{loading:void 0==Z,style:te,children:Object(m.jsxs)(T.a,{size:"small",children:[Object(m.jsx)(T.a.Value,{children:Z}),Object(m.jsx)(T.a.Label,{children:"Projekte in Aussicht"})]})}),Object(m.jsx)(L.a,{loading:void 0==Q,style:te,children:Object(m.jsxs)(T.a,{size:"small",children:[Object(m.jsx)(T.a.Value,{children:Q&&Q.toLocaleString("de")+" \u20ac"}),Object(m.jsx)(T.a.Label,{children:"Honorar in Aussicht"})]})})]})]})}),Object(m.jsx)(H.a,{open:n,children:Object(m.jsx)(U,{})})]})},W=n(695),G=n(502),J=n(308),Q=n.n(J),X=n.p+"static/media/sample.99776b0e.svg",Y=n(493),$=n(494),ee=function(e){return new Promise((function(t,n){var r=new Image;r.addEventListener("load",(function(){return t(r)})),r.addEventListener("error",(function(e){return n(e)})),r.setAttribute("crossOrigin","anonymous"),r.src=e}))};function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(C.a)(y.a.mark((function e(t,n){var r,c,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t);case 2:return r=e.sent,(c=document.createElement("canvas")).width=n.width,c.height=n.height,(a=c.getContext("2d")).fillStyle="#ffffff",a.fillRect(0,0,c.width,c.height),a.drawImage(r,n.x,n.y,n.width,n.height,0,0,n.width,n.height),e.abrupt("return",new Promise((function(e,t){c.toBlob((function(t){e(URL.createObjectURL(t))}),"image/jpeg")})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=n(503);var ce=function(){var e=Object(r.useState)({x:0,y:0}),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(1),o=Object(s.a)(a,2),i=o[0],u=o[1],l=Object(r.useState)(null),j=Object(s.a)(l,2),d=j[0],p=j[1],b=g((function(e){return[e.cropImage,e.setCropImage]})),f=Object(s.a)(b,2),h=(f[0],f[1]),O=g((function(e){return e.setCropModalOpen})),x=Object(r.useCallback)((function(e,t){p(t)}),[]),v=function(){var e=Object(C.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.imageq,e.prev=1,e.next=4,te(t,d);case 4:n=e.sent,h(n),O(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),k={start:0,min:0,max:3,step:.01,onChange:function(e){u(e)}};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Y.Gluejar,{onError:function(e){return console.error(e)},children:function(e){var t=e.images;return window.imageq=t.slice(-1),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(L.a,{textAlign:"center",compact:!0,style:{padding:"1rem"},children:t.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)($.Slider,{style:{marginBottom:"1rem"},value:i,color:"red",settings:k}),Object(m.jsx)("div",{style:{position:"relative",height:"250px",width:"250px"},children:Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(re.a,{cropSize:{width:200,height:200},image:window.imageq,crop:n,zoom:i,min:1,max:3,restrictPosition:!1,aspect:1,onCropChange:c,onCropComplete:x})})}),Object(m.jsx)(E.a,{style:{marginTop:"1rem"},onClick:function(){return v()},children:"Cut Image"})]}):Object(m.jsx)("div",{style:{height:"200px",width:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(m.jsx)("h4",{children:"Paste Image"})})})})}})})};var ae=function(){var e=g((function(e){return[e.cropModalOpen,e.setCropModalOpen]})),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(s.a)(a,2),i=o[0],u=o[1],j=Object(r.useState)(""),d=Object(s.a)(j,2),p=(d[0],d[1],Object(r.useState)({})),b=Object(s.a)(p,2),f=b[0],h=b[1],O=g((function(e){return e.cropImage})),x=g((function(e){return e.setOpenClient})),v=Object(r.useState)([]),k=Object(s.a)(v,2),w=k[0],S=k[1],I=Object(r.useState)(),D=Object(s.a)(I,2),F=D[0],A=D[1],M=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/artikel/");case 3:t=e.sent,console.log(t.data),S(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(C.a)(y.a.mark((function e(){var t,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(O),e.prev=1,t=new FormData,null==O){e.next=11;break}return e.next=6,fetch(O).then((function(e){return e.blob()})).then((function(e){return new File([e],"".concat(i.replace(".","-").replace(" ","-"),".jpeg"),{type:"image/jpeg"})}));case 6:return n=e.sent,e.next=9,Q()({file:n,width:300,height:300,type:"jpeg"});case 9:r=e.sent,t.append("image",r);case 11:return t.append("name",i),t.append("artikel",F),e.next=15,P.post("/kunden/",t);case 15:x(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0.response),h(e.t0.response.data);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){M()}),[]),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{style:{width:"250px"},children:[Object(m.jsx)(G.a,{fluid:!0,src:O||X,onClick:function(){return c(!0)},style:{cursor:"pointer",padding:"1rem"}}),Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Field,{onChange:function(e){return u(e.target.value)},value:i,control:K.a,error:f.name&&{content:f.name,pointing:"below"},placeholder:"Name"}),Object(m.jsx)(_.a.Field,{selection:!0,control:l.a,onChange:function(e,t){return A(t.value)},fluid:!0,placeholder:"Artikel (z.B. das Klinikum)",options:w.map((function(e){return{value:e.id,text:e.nominativ}}))})]}),Object(m.jsx)(E.a,{onClick:function(){return R()},style:{display:"block",width:"100%",marginTop:".5rem"},content:"Erstellen"})]}),Object(m.jsxs)(H.a,{size:"mini",open:n,onClose:function(){return c(!1)},children:[Object(m.jsx)(H.a.Header,{children:"Trim Image"}),Object(m.jsx)(H.a.Content,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(m.jsx)(ce,{})})]})]})};n.p;var oe=function(e){var t=e.data,n=e.editPortal,c=e.updateSite,a=Object(r.useState)(!1),o=Object(s.a)(a,2),i=o[0],u=o[1],l=Object(r.useState)({}),j=Object(s.a)(l,2),d=j[0],p=j[1],b=g((function(e){return e.setOpenClient})),f=g((function(e){return[e.editClientData,e.setEditClientData]})),h=Object(s.a)(f,2),O=(h[0],h[1]),x=function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.delete("clients/".concat(t));case 3:u(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){c()}),[i]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(N.a,{test:i,title:"Kundenliste",columns:[{title:"Logo",field:"image",render:function(e){return console.log(e.image),Object(m.jsx)(G.a,{bordered:!0,src:e.image,style:{height:"40px",background:"transparent"},rounded:!0})}},{title:"Kunde",field:"name"}],data:t,options:{actionsColumnIndex:-1,sorting:!0,exportButton:!0,pageSize:10},actions:[{icon:"edit",tooltip:"Projektdetails",onClick:function(e,t){n(!0),console.log(t),O(t)}},{icon:"delete",tooltip:"Projekt l\xf6schen",onClick:function(e,t){console.log(t),p(t),u(!0)}},{icon:"add",isFreeAction:!0,onClick:function(){b(!0)}}]}),Object(m.jsxs)(H.a,{open:i,onClose:function(){return u(!1)},children:[Object(m.jsx)(H.a.Header,{children:"Kunde l\xf6schen"}),Object(m.jsxs)(H.a.Content,{children:["Das Project"," ",Object(m.jsx)("strong",{children:d.name})," ","wirklich l\xf6schen ?"]}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(E.a,{negative:!0,onClick:function(){return u(!1)},children:"Abbrechen"}),Object(m.jsx)(E.a,{positive:!0,onClick:function(){return x(d.id)},children:"L\xf6schen"})]})]})]})};var ie=function(e){var t=e.editPortal,n=g((function(e){return[e.cropModalOpen,e.setCropModalOpen]})),c=Object(s.a)(n,2),a=c[0],o=c[1],i=g((function(e){return[e.editClientData,e.setEditClientData]})),u=Object(s.a)(i,2),j=u[0],d=(u[1],Object(r.useState)(j.name)),p=Object(s.a)(d,2),b=p[0],f=p[1],h=Object(r.useState)({}),O=Object(s.a)(h,2),x=O[0],v=O[1],k=g((function(e){return e.cropImage})),w=(g((function(e){return e.setOpenClient})),Object(r.useState)([])),S=Object(s.a)(w,2),I=S[0],D=S[1],F=Object(r.useState)(j.artikel),A=Object(s.a)(F,2),M=A[0],R=A[1],z=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/artikel/");case 3:t=e.sent,console.log(t.data),D(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(C.a)(y.a.mark((function e(){var n,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(k),e.prev=1,n=new FormData,null==k){e.next=11;break}return e.next=6,fetch(k).then((function(e){return e.blob()})).then((function(e){return new File([e],"".concat(b.replace(".","-").replace(" ","-"),".jpeg"),{type:"image/jpeg"})}));case 6:return r=e.sent,e.next=9,Q()({file:r,width:300,height:300,type:"jpeg"});case 9:c=e.sent,n.append("image",c);case 11:return n.append("name",b),n.append("artikel",M),e.next=15,P.put("/clients/".concat(j.id,"/"),n);case 15:t(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0.response),v(e.t0.response.data);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){z()}),[]),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{style:{width:"250px"},children:[Object(m.jsx)(G.a,{fluid:!0,src:k||j.image,onClick:function(){return o(!0)},style:{cursor:"pointer",padding:"1rem"}}),Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Field,{onChange:function(e){return f(e.target.value)},value:b,control:K.a,error:x.name&&{content:x.name,pointing:"below"},placeholder:"Name"}),Object(m.jsx)(_.a.Field,{selection:!0,control:l.a,value:M,onChange:function(e,t){return R(t.value)},fluid:!0,placeholder:"Artikel (z.B. das Klinikum)",options:I.map((function(e){return{value:e.id,text:e.nominativ}}))})]}),Object(m.jsx)(E.a,{onClick:function(){return L()},style:{display:"block",width:"100%",marginTop:".5rem"},content:"Erstellen"})]}),Object(m.jsxs)(H.a,{size:"mini",open:a,onClose:function(){return o(!1)},children:[Object(m.jsx)(H.a.Header,{children:"Trim Image"}),Object(m.jsx)(H.a.Content,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(m.jsx)(ce,{})})]})]})};var se=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=(g((function(e){return e.cropImage})),g((function(e){return[e.openClient,e.setOpenClient]}))),o=Object(s.a)(a,2),i=o[0],u=o[1],l=Object(r.useState)(0),j=Object(s.a)(l,2),d=j[0],p=j[1],b=Object(r.useState)(!1),f=Object(s.a)(b,2),h=f[0],O=f[1],x=function(e){O(e)},v=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/clients/");case 3:t=e.sent,c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){v()}),[i,h,d]),Object(m.jsxs)("div",{children:[Object(m.jsx)(oe,{updateSite:function(){p((function(e){return e+1}))},data:n,editPortal:x}),Object(m.jsx)(W.a,{open:i,children:Object(m.jsxs)(L.a,{style:{left:0,right:0,marginLeft:"auto",marginRight:"auto",position:"fixed",width:"280px",top:"20%",zIndex:1e3},children:[Object(m.jsx)(I.a,{children:"Neuen Kunden anlegen"}),Object(m.jsx)(ae,{}),Object(m.jsx)(E.a,{style:{marginTop:".5rem"},fluid:!0,content:"Abbrechen",negative:!0,onClick:function(){return u(!1)}})]})}),Object(m.jsx)(W.a,{open:h,children:Object(m.jsxs)(L.a,{style:{left:0,right:0,marginLeft:"auto",marginRight:"auto",position:"fixed",width:"280px",top:"20%",zIndex:1e3},children:[Object(m.jsx)(I.a,{children:"Kunden bearbeiten"}),Object(m.jsx)(ie,{editPortal:x}),Object(m.jsx)(E.a,{style:{marginTop:".5rem"},fluid:!0,content:"Abbrechen",negative:!0,onClick:function(){return O(!1)}})]})})]})},ue=n(686),le=n(689),je=n(679),de=n(680),pe=n(496),be=n(473),fe=function(e){var t=e.filepath,n=e.filename,r=e.data,c=e.render,a=function(){var e=Object(C.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(C.a)(y.a.mark((function e(t,n,r){var c,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return c=e.sent,e.next=5,c.blob();case 5:return a=e.sent,e.abrupt("return",{_type:"image",source:a,format:a.type,width:n,height:r});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function i(e,t){var n=URL.createObjectURL(t),r=document.createElement("a");r.download=e,r.href=n,document.body.appendChild(r),r.click(),setTimeout((function(){r.remove(),window.URL.revokeObjectURL(n),r=null}),0)}var s=function(){var e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.keys(r).forEach((function(e){r[e]&&(be.isArray(r[e])?r[e].forEach((function(t,n){Object.keys(t).forEach((function(t){r[e][n][t].isImage&&o(r[e][n][t].url,r[e][n][t].width,r[e][n][t].height).then((function(c){return r[e][n][t]=c}))}))})):r[e].isImage&&o(r[e].url,r[e].width,r[e].height).then((function(t){return r[e]=t})))})),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c(function(){var e=Object(C.a)(y.a.mark((function e(){var r,c,o,u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new pe.a,e.next=3,a(t);case 3:return c=e.sent,e.next=6,s();case 6:return o=e.sent,e.next=9,r.process(c,o);case 9:u=e.sent,i(n,u);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())};fe.defaultProps={render:function(e){return Object(m.jsx)("button",{onClick:function(){return e()},children:"Word-Document"})}};var he=fe,Oe=n(161);var xe=function(){var e=Object(r.useState)({}),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)({}),o=Object(s.a)(a,2),i=o[0],u=(o[1],g((function(e){return[e.invoiceCreateModel,e.setInvoiceCreateModel]}))),l=Object(s.a)(u,2),j=(l[0],l[1]),d=g((function(e){return e.projectdata})),p=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.post("/invoices/",Object(M.a)(Object(M.a)({},n),{},{project:d.id,status:1,invoice_number:"RN"}));case 3:t=e.sent,console.log(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:j(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){console.log(n)}),[n]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H.a.Header,{children:"Neue Rechnung"}),Object(m.jsx)(H.a.Content,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Field,{label:"Rechnungsname",control:K.a,error:i.name&&{content:i.name,pointing:"below"},onChange:function(e){return c((function(t){return Object(M.a)(Object(M.a)({},t),{},{title:e.target.value})}))},placeholder:"Title"}),Object(m.jsxs)(_.a.Field,{children:[Object(m.jsx)("label",{children:"Rechnungsbetrag"}),Object(m.jsx)(Oe.a,{placeholder:"Betrag in \u20ac (netto)",value:n.amount,onValueChange:function(e){e.formattedValue;var t=e.value;c((function(e){return Object(M.a)(Object(M.a)({},e),{},{amount:t})}))},isNumericString:!0,decimalScale:2,thousandSeparator:".",decimalSeparator:",",prefix:"\u20ac ",customInput:K.a})]}),Object(m.jsx)(_.a.Field,{label:"Vorraussichtliche Rechnungsstellung",control:K.a,error:i.name&&{content:i.name,pointing:"below"},onChange:function(e){return c((function(t){return Object(M.a)(Object(M.a)({},t),{},{date_of_payment:e.target.value})}))},placeholder:"Title",type:"date"})]})}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(E.a,{negative:!0,onClick:function(){return j(!1)},children:"Disagree"}),Object(m.jsx)(E.a,{positive:!0,onClick:function(){return p()},children:"Agree"})]})]})};var ge=function(e){var t=e.invoiceID,n=g((function(e){return[e.invoices,e.setInvoices]})),c=Object(s.a)(n,2),a=c[0],o=(c[1],a.find((function(e){return e.id===t}))),i=Object(r.useState)(Object(M.a)({},o)),u=Object(s.a)(i,2),j=u[0],d=u[1],p=Object(r.useState)({}),b=Object(s.a)(p,2),f=b[0],h=(b[1],g((function(e){return[e.invoiceEditModel,e.setInvoiceEditModel]}))),O=Object(s.a)(h,2),x=(O[0],O[1]),v=g((function(e){return[e.invoiceStati,e.setInvoiceStati]})),k=Object(s.a)(v,2),w=k[0],S=(k[1],function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.put("invoices/".concat(o.id),Object(M.a)({},j));case 3:t=e.sent,console.log(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:x(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}());return Object(r.useEffect)((function(){console.log(j)}),[j]),Object(r.useEffect)((function(){console.log(w),console.log(o)}),[w]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H.a.Header,{children:"Rechnung Bearbeiten"}),Object(m.jsx)(H.a.Content,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Field,{label:"Rechnungsname",control:K.a,value:j.title,error:f.name&&{content:f.name,pointing:"below"},onChange:function(e){return d((function(t){return Object(M.a)(Object(M.a)({},t),{},{title:e.target.value})}))},placeholder:"Title"}),Object(m.jsxs)(_.a.Field,{children:[Object(m.jsx)("label",{children:"Rechnungsbetrag"}),Object(m.jsx)(Oe.a,{placeholder:"Betrag in \u20ac (netto)",value:j.amount,onValueChange:function(e){console.log(e);e.formattedValue;var t=e.value;d((function(e){return Object(M.a)(Object(M.a)({},e),{},{amount:t})}))},isNumericString:!0,decimalScale:2,thousandSeparator:".",decimalSeparator:",",prefix:"\u20ac ",customInput:K.a})]}),Object(m.jsx)(_.a.Field,{selection:!0,label:"Status",control:l.a,value:j.status,error:f.project_type&&{content:f.project_type,pointing:"below"},onChange:function(e,t){return d((function(e){return Object(M.a)(Object(M.a)({},e),{},{status:t.value})}))},fluid:!0,placeholder:"Projekttyp w\xe4hlen",options:w}),Object(m.jsx)(_.a.Field,{label:"Rechnungsstellung",control:K.a,disabled:1==j.status,value:j.date_of_invoicing,error:f.name&&{content:f.name,pointing:"below"},onChange:function(e){return d((function(t){return Object(M.a)(Object(M.a)({},t),{},{date_of_invoicing:e.target.value})}))},placeholder:"Title",type:"date"}),Object(m.jsx)(_.a.Field,{label:"Vorraussichtlicher Zahlungseingang",control:K.a,value:j.date_of_payment,error:f.name&&{content:f.name,pointing:"below"},onChange:function(e){return d((function(t){return Object(M.a)(Object(M.a)({},t),{},{date_of_payment:e.target.value})}))},placeholder:"Title",type:"date"})]})}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(E.a,{negative:!0,onClick:function(){return x(!1)},children:"Disagree"}),Object(m.jsx)(E.a,{positive:!0,onClick:function(){return S()},children:"Agree"})]})]})},ve=n.p+"static/media/re_vorlage.0c790b2b.docx";var me=function(e){var t=e.projectID,n=new Intl.NumberFormat("de",{style:"currency",currency:"EUR"}),c=g((function(e){return[e.invoices,e.setInvoices]})),a=Object(s.a)(c,2),o=a[0],i=a[1],u=g((function(e){return[e.invoiceCreateModel,e.setInvoiceCreateModel]})),l=Object(s.a)(u,2),j=l[0],p=l[1],b=g((function(e){return[e.invoiceEditModel,e.setInvoiceEditModel]})),f=Object(s.a)(b,2),h=f[0],O=f[1],x=g((function(e){return[e.invoiceStati,e.setInvoiceStati]})),v=Object(s.a)(x,2),k=v[0],w=v[1],S=Object(r.useState)([]),I=Object(s.a)(S,2),_=I[0],D=I[1],F=g((function(e){return e.projectdata})),A=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/artikel/");case 3:t=e.sent,D(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/invoicestatus/");case 3:t=e.sent,w(t.data.map((function(e){return{value:e.id,text:e.name,icon:e.icontext}}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),z=Object(r.useState)(!0),L=Object(s.a)(z,2),T=L[0],B=L[1],V=Object(r.useState)(!1),K=Object(s.a)(V,2),U=K[0],q=K[1],Z=Object(r.useState)({}),W=Object(s.a)(Z,2),G=W[0],J=W[1],Q=function(){var e=Object(C.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("invoices",{params:{id:t}});case 3:n=e.sent,i(n.data),B(!1),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.delete("invoices/".concat(t));case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 8:q(!1);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(C.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=o.findIndex((function(e){return e.id===t})),e.next=4,P.put("invoices/".concat(t),Object(M.a)(Object(M.a)({},o[n]),{},{status:3===o[n].status?1:o[n].status+1}));case 4:r=e.sent,i(o.map((function(e,t){return t===n?r.data:e}))),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){R(),A()}),[]),Object(r.useEffect)((function(){Q()}),[j,U,h]),Object(r.useEffect)((function(){console.log(o)}),[o]),Object(m.jsxs)(m.Fragment,{children:[T?Object(m.jsx)(le.a,{active:!0,inverted:!0,children:Object(m.jsx)(je.a,{size:"medium",children:"Loading"})}):Object(m.jsx)(N.a,{title:"Rechnungen",style:{boxShadow:"none"},columns:[{title:"Name",field:"title"},{title:"RN",field:"invoice_number"},{title:"Betrag",field:"amount",type:"currency",currencySetting:{locale:"de",currencyCode:"EUR"}},{title:"Status",field:"status",render:function(e){var t=k.find((function(t){return t.value===e.status}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("span",{style:{marginRight:".2rem"},children:t&&t.text}),Object(m.jsx)(d.a,{color:t&&3===t.value?"green":t&&2===t.value?"yellow":"black",name:t&&t.icon})]})}},{title:"Stellung",field:"date_of_invoicing",type:"date"},{title:"Eingang",field:"date_of_payment",type:"date",render:function(e){var t=new Date(e.date_of_payment).toLocaleDateString("de");return Object(m.jsx)("span",{style:{color:3===e.status?"#016936":"#CFCCD6"},children:t})}}],actions:[{icon:"word",color:"grey",tooltip:"status",onClick:function(e,t){Y(t.id)}},{icon:"edit",color:"blue",tooltip:"Bearbeiten",onClick:function(e,t){J(t),O(!0)}},{icon:"delete",color:"red",tooltip:"Rechnung l\xf6schen",onClick:function(e,t){J(t),q(!0)}},{icon:"add",tooltip:"Neue Rechnung",color:"grey",isFreeAction:!0,onClick:function(e){return p(!0)}}],components:{Action:function(e){var t=e.data,r=_.find((function(e){return F.client&&e.id===F.client.artikel})),c=[];F.part&&c.push({item:F.part}),F.contact&&c.push({item:F.contact}),F.street&&c.push({item:F.street}),F.plz&&F.place&&c.push({item:F.plz+" "+F.place});var a={date:(new Date).toLocaleDateString("de"),logo:{isImage:!0,url:F.client&&F.client.image,width:20,height:20},invoice_number:t.invoice_number,netto:n.format(t.amount),tax:n.format(.19*t.amount),brutto:n.format(1.19*t.amount),clientname:F.client&&F.client.name,project_number:F.project_number,title:F.title,artikel:r&&r.nominativ,street:F.street,plz:F.plz,place:F.place,contact:F.contact,adresse:c,part:F.part,contactSalut:F.contact?"Herr"===F.contact.substring(0,4)?"sehr geehrter ".concat(F.contact):"Frau"===F.contact.substring(0,4)?"sehr geehrte ".concat(F.contact):"":"Sehr geehrte Damen und Herren"};return"word"===e.action.icon?Object(m.jsx)(he,{filepath:ve,filename:"".concat(t.invoice_number,".docx"),data:a,render:function(e){return Object(m.jsx)(d.a,{name:"file word",size:"large",color:"blue",style:{cursor:"pointer"},onClick:function(){return e()}})}}):Object(m.jsx)(de.a,{content:e.action.tooltip,trigger:Object(m.jsx)(d.a,{color:e.action.color,style:{cursor:"pointer"},size:"large",name:e.action.icon,onClick:function(t){return e.action.onClick(t,e.data)}})})}},data:o,options:{actionsColumnIndex:-1,sorting:!0,showTitle:!0,toolbar:!0,pageSize:4,search:!1,pageSizeOptions:[]}}),Object(m.jsxs)(H.a,{open:U,onClose:function(){return q(!1)},children:[Object(m.jsx)(H.a.Header,{children:"Rechnung l\xf6schen"}),Object(m.jsxs)(H.a.Content,{children:["Rechnung ",G.title," wirklich l\xf6schen ?"]}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(E.a,{negative:!0,onClick:function(){return q(!1)},children:"Disagree"}),Object(m.jsx)(E.a,{positive:!0,onClick:function(){return X(G.id)},children:"Agree"})]})]}),Object(m.jsx)(H.a,{open:h,onClose:function(){return O(!1)},children:Object(m.jsx)(ge,{invoiceID:G.id})}),Object(m.jsx)(H.a,{open:j,onClose:function(){return p(!1)},children:Object(m.jsx)(xe,{})})]})},ke=n(477);var we=function(e){var t=e.projectID,n=g((function(e){return[e.projectdata,e.setProjectdata]})),c=Object(s.a)(n,2),a=c[0],o=c[1],i=g((function(e){return[e.projectsteps,e.setProjectsteps]})),u=Object(s.a)(i,2),l=u[0],j=u[1],p=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("status");case 3:t=e.sent,j(t.data),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(C.a)(y.a.mark((function e(n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.put("projects/".concat(t,"/"),{status:n,title:a.title,project_number:a.project_number});case 3:r=e.sent,o(r.data),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0.response),e.abrupt("return",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),f=l.map((function(e){return ke.isEmpty(a)?null:Object(m.jsxs)(ue.a,{completed:a.status>=e.order,active:a.status+1===e.order,onClick:function(){return b(e.order)},children:[Object(m.jsx)(d.a,{name:e.icontext}),Object(m.jsxs)(ue.a.Content,{children:[Object(m.jsx)(ue.a.Title,{children:e.name}),Object(m.jsx)(ue.a.Description,{children:e.subtext})]})]},e.id)}));return Object(r.useEffect)((function(){p()}),[]),Object(m.jsx)(m.Fragment,{children:f})},ye=n(685);var Ce=function(){var e=Object(p.g)(),t=g((function(e){return e.projectdata})),n=g((function(e){return[e.editModalOpen,e.setEditModalOpen]})),c=Object(s.a)(n,2),a=(c[0],c[1]),o=Object(r.useState)({title:t.title,place:t.place,street:t.street,plz:t.plz,part:t.part,contact:t.contact&&t.contact.substring(5),client:t.client&&t.client.id}),i=Object(s.a)(o,2),u=i[0],j=i[1],d=[{value:1,text:"Herr"},{value:2,text:"Frau"}],b=Object(r.useState)(t.contact&&"Herr"===t.contact.substring(0,4)?d[0]:d[1]),f=Object(s.a)(b,2),h=f[0],O=f[1],x=Object(r.useState)([]),v=Object(s.a)(x,2),k=v[0],w=v[1],S=Object(r.useState)(""),I=Object(s.a)(S,2),D=I[0],F=(I[1],function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/clients/");case 3:t=e.sent,w(t.data.map((function(e){return{value:e.id,image:e.image,short:e.short,text:e.name}}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()),A=function(){var n=Object(C.a)(y.a.mark((function n(){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P.put("/projectupdate/".concat(t.id,"/"),Object(M.a)(Object(M.a)({},u),{},{title:u.title,client:u.client,contact:u.contact?h.text+" "+u.contact:null,place:u.place?u.place:null,street:u.street?u.street:null,plz:u.plz?u.plz:null,part:u.part?u.part:null}));case 3:n.sent,n.next=11;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0),401===n.t0.response.status&&e.push("/login"),console.log(n.t0.response);case 11:a(!1);case 12:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){F()}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(H.a.Header,{children:["Projekt: ",Object(m.jsx)("span",{style:{color:"red"},children:t.title})]}),Object(m.jsx)(H.a.Content,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Field,{label:"Title",control:K.a,value:u.title,error:D.name&&{content:D.name,pointing:"below"},onChange:function(e){return j((function(t){return Object(M.a)(Object(M.a)({},t),{},{title:e.target.value})}))},placeholder:"Title"}),Object(m.jsx)(_.a.Field,{search:!0,selection:!0,control:l.a,value:u.client,label:"Kunde",error:D.client&&{content:D.client,pointing:"below"},onChange:function(e,t){return j((function(e){return Object(M.a)(Object(M.a)({},e),{},{client:t.value})}))},options:k,fluid:!0,placeholder:"Kunde ausw\xe4hlen"}),Object(m.jsx)(_.a.Field,{label:"Ort",control:K.a,value:u.place,onChange:function(e){return j((function(t){return Object(M.a)(Object(M.a)({},t),{},{place:e.target.value})}))},placeholder:"Ort"}),Object(m.jsx)(_.a.Field,{label:"Stra\xdfe + Hausnummer",control:K.a,value:u.street,onChange:function(e){return j((function(t){return Object(M.a)(Object(M.a)({},t),{},{street:e.target.value})}))},placeholder:"Stra\xdfe"}),Object(m.jsxs)(_.a.Group,{children:[Object(m.jsx)(_.a.Field,{width:4,selection:!0,control:l.a,value:h.value,label:"Anrede",error:D.client&&{content:D.client,pointing:"below"},onChange:function(e,t){O(1===t.value?d[0]:d[1])},options:[{value:1,text:"Herr"},{value:2,text:"Frau"}],fluid:!0}),Object(m.jsx)(_.a.Field,{width:12,label:"Kontaktperson",control:K.a,value:u.contact,onChange:function(e){return j((function(t){return Object(M.a)(Object(M.a)({},t),{},{contact:e.target.value})}))},placeholder:"z.B. Dr. M\xfcller"})]}),Object(m.jsx)(_.a.Field,{label:"Abteilung",control:K.a,value:u.part,onChange:function(e){return j((function(t){return Object(M.a)(Object(M.a)({},t),{},{part:e.target.value})}))},placeholder:"z.B. Herr Dr. M\xfcller"}),Object(m.jsx)(_.a.Field,{label:"Postleitzahl",control:K.a,value:u.plz,onChange:function(e){return j((function(t){return Object(M.a)(Object(M.a)({},t),{},{plz:e.target.value})}))},placeholder:"plz"})]})}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(E.a,{negative:!0,onClick:function(){return a(!1)},children:"Abbrechen"}),Object(m.jsx)(E.a,{positive:!0,onClick:function(){return A()},children:"Projekt updated"})]})]})};n.p;var Se=function(){var e=g((function(e){return e.projectdata})),t=g((function(e){return e.projectHonorar})),n=g((function(e){return[e.createOfferModel,e.setCreateOfferModel]})),c=Object(s.a)(n,2),a=(c[0],c[1]),o=Object(r.useState)([]),i=Object(s.a)(o,2),u=i[0],j=i[1],d=Object(r.useState)([]),p=Object(s.a)(d,2),b=p[0],f=p[1],h=Object(r.useState)([]),O=Object(s.a)(h,2),x=O[0],v=O[1],k=Object(r.useState)(),w=Object(s.a)(k,2),S=w[0],I=w[1],D=Object(r.useState)(),F=Object(s.a)(D,2),A=F[0],R=F[1],z=Object(r.useState)(),L=Object(s.a)(z,2),T=L[0],B=L[1],N=Object(r.useState)([]),V=Object(s.a)(N,2),U=V[0],q=V[1],Z=Object(r.useState)({}),W=Object(s.a)(Z,2),G=W[0],J=W[1],Q=new Date,X=(new Date).setDate(Q.getDate()+30),Y=new Date(X),$=Object(r.useState)({title:e.title,place:e.place,date:Q.toLocaleDateString("de-DE"),dateTo:Y.toLocaleDateString("de-DE"),client_name:e.client.name,client_image:{isImage:!0,url:e.client.image,width:100,height:100},project_number:e.project_number,project_numbers:e.project_number,honorar:t,honorarstring:t.toLocaleString("de-DE",{style:"currency",currency:"EUR"}),suply:350,suplystring:350..toLocaleString("de-DE",{style:"currency",currency:"EUR"})}),ee=Object(s.a)($,2),te=ee[0],ne=ee[1],re=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("templates/");case 3:t=e.sent,q(t.data.map((function(e){return{value:e.id,text:e.name,code:e.code,template:e.template}}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var t=Object(C.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.get("artikel/");case 3:n=t.sent,ne((function(t){return Object(M.a)(Object(M.a)({},t),n.data.find((function(t){return t.id===e.client.artikel})))})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),ae=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("skill/");case 3:t=e.sent,f(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("crew/");case 3:t=e.sent,j(t.data.map((function(e){return{value:e.id,image:e.image,text:e.short,name:e.name,role:e.role,mobile:e.mobile}}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){oe(),ae(),ce(),re()}),[]),Object(r.useEffect)((function(){console.log(te)}),[te]),Object(r.useEffect)((function(){console.log(b)}),[b]),Object(r.useEffect)((function(){var e=u.filter((function(e){return x.includes(e.value)})).map((function(e){return{crew_name:e.name,crew_role:e.role,crew_mobile:e.mobile,crew_image:{isImage:!0,url:e.image,width:120,height:140},crew_skills:b.filter((function(t){return t.crew===e.value}))}}));ne((function(t){return Object(M.a)(Object(M.a)({},t),{},{crew:e})}))}),[x]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(H.a.Header,{children:["Projekt: ",Object(m.jsx)("span",{style:{color:"red"},children:e.title})]}),Object(m.jsx)(H.a.Content,{children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(_.a.Field,{selection:!0,control:l.a,label:"Projektart",fluid:!0,placeholder:"Art ausw\xe4hlen",options:U,value:S,onChange:function(e,t){var n=t.value;t.code;B(e.target.getAttribute("code")),I(n),J(U.find((function(e){return e.value===n})))}}),Object(m.jsxs)(_.a.Field,{children:[Object(m.jsx)("label",{children:"Honorar"}),Object(m.jsx)(Oe.a,{placeholder:"Betrag in \u20ac (netto)",value:te.honorar,onValueChange:function(e){console.log(e);e.formattedValue;var t=e.value,n=e.floatValue;ne((function(e){return Object(M.a)(Object(M.a)({},e),{},{honorar:t,honorarstring:n.toLocaleString("de-DE",{style:"currency",currency:"EUR"})})}))},isNumericString:!0,decimalScale:2,thousandSeparator:".",decimalSeparator:",",prefix:"\u20ac ",customInput:K.a})]}),Object(m.jsxs)(_.a.Field,{children:[Object(m.jsx)("label",{children:"Reisekosten"}),Object(m.jsx)(Oe.a,{placeholder:"Betrag in \u20ac (netto)",value:te.suply,onValueChange:function(e){e.formattedValue;var t=e.value,n=e.floatValue;ne((function(e){return Object(M.a)(Object(M.a)({},e),{},{suply:t,suplystring:n.toLocaleString("de-DE",{style:"currency",currency:"EUR"})})}))},isNumericString:!0,decimalScale:2,thousandSeparator:".",decimalSeparator:",",prefix:"\u20ac ",customInput:K.a})]}),Object(m.jsx)(_.a.Field,{multiple:!0,selection:!0,control:l.a,label:"Projektteam",fluid:!0,placeholder:"Team ausw\xe4hlen",options:u,value:x,onChange:function(e,t){var n=t.value;return v(n)}}),Object(m.jsx)(_.a.Field,{selection:!0,control:l.a,label:"Zahlung",fluid:!0,placeholder:"Zahlungsmodalit\xe4t ausw\xe4hlen",options:[{value:0,text:"Rein netto, 14 Tage nach Rechnungseingang."},{value:1,text:"50% des Honorars werden nach Erstellung der Vergabeunterlagen, die verbleibenden 50% bei Projektabschluss (Zuschlagserteilung) berechnet. Rein netto, 14 Tage nach Rechnungseingang."},{value:2,text:"50% des Honorars werden nach Fertigstellung der IST-Analyse, die verbleibenden 50% bei Projektabschluss berechnet. Rein netto, 14 Tage nach Rechnungseingang."}],value:A,onChange:function(e,t){var n=t.value;R(n),ne((function(t){return Object(M.a)(Object(M.a)({},t),{},{modalstring:e.target.innerText})}))}})]})}),Object(m.jsxs)(H.a.Actions,{children:[Object(m.jsx)(E.a,{negative:!0,onClick:function(){return a(!1)},children:"Abbrechen"}),Object(m.jsx)(he,{filepath:G.template,filename:"Angebot-".concat(T,"-").concat(e.project_number,".docx"),data:te,render:function(e){return Object(m.jsx)(E.a,{icon:"file word",content:"offer",color:"blue",style:{marginBottom:".3rem"},onClick:function(){return e()}})}})]})]})},Ie=n(477);var _e=function(e){var t=e.projectID,n=g((function(e){return[e.projectdata,e.setProjectdata]})),c=Object(s.a)(n,2),a=c[0],o=c[1],i=g((function(e){return[e.projectHonorar,e.setProjectHonorar]})),u=Object(s.a)(i,2),l=u[0],j=u[1],p=g((function(e){return[e.editModalOpen,e.setEditModalOpen]})),b=Object(s.a)(p,2),f=b[0],h=b[1],O=g((function(e){return[e.createOfferModel,e.setCreateOfferModel]})),x=Object(s.a)(O,2),v=x[0],k=x[1],w=g((function(e){return e.invoices}));Object(r.useEffect)((function(){if(w){var e=0;w.forEach((function(t){return e+=parseFloat(t.amount)})),j(e)}}),[w]),Object(r.useEffect)((function(){console.log(a)}),[a]);var S=function(){var e=Object(C.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("projects/".concat(t,"/"));case 3:n=e.sent,o(n.data),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),I=new Date(a.created_at).toLocaleDateString("de",{hour:"numeric",minute:"numeric"});return Object(r.useEffect)((function(){S()}),[f]),Ie.isEmpty(a)?Object(m.jsx)(le.a,{active:!0,inverted:!0,children:Object(m.jsx)(je.a,{size:"medium",children:"Loading"})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(ye.a,{divided:!0,relaxed:!0,children:[Object(m.jsx)(ye.a.Item,{children:Object(m.jsxs)(ye.a.Content,{children:[Object(m.jsx)(ye.a.Header,{as:"h2",children:a.title}),Object(m.jsxs)(ye.a.Description,{as:"p",style:{marginBottom:0},children:[Object(m.jsx)("strong",{children:"Erstellt:"})," ",I]}),Object(m.jsxs)(ye.a.Description,{as:"p",children:[Object(m.jsx)("strong",{children:"Projektnr:"})," ",a.project_number]})]})}),Object(m.jsxs)(ye.a.Item,{children:[Object(m.jsx)(G.a,{rounded:!0,style:{width:"23.625px",marginRight:"6px"},src:a.client&&a.client.image}),Object(m.jsx)(ye.a.Content,{children:Object(m.jsx)(ye.a.Header,{as:"h3",children:a.client?a.client.name:"NO CLIENT"})})]}),Object(m.jsxs)(ye.a.Item,{children:[Object(m.jsx)(ye.a.Icon,{name:"eur",size:"large",verticalAlign:"middle"}),Object(m.jsxs)(ye.a.Content,{children:[Object(m.jsx)(ye.a.Header,{style:{marginLeft:"11px"},as:"h4",children:"Honorar"}),Object(m.jsx)(ye.a.Description,{style:{marginLeft:"11px"},children:Object(m.jsx)("strong",{style:{color:"green"},children:l&&l.toLocaleString("de")+" \u20ac"})})]})]}),Object(m.jsxs)(ye.a.Item,{children:[Object(m.jsx)(ye.a.Icon,{name:"map",size:"large",verticalAlign:"middle"}),Object(m.jsxs)(ye.a.Content,{children:[Object(m.jsx)(ye.a.Header,{as:"h4",children:"Anschrift"}),Object(m.jsxs)(ye.a.Description,{children:[Object(m.jsx)("strong",{children:"Stra\xdfe: "}),a.street," ",a.street&&Object(m.jsx)(d.a,{color:"green",name:"check"})]}),Object(m.jsxs)(ye.a.Description,{children:[Object(m.jsx)("strong",{children:"Plz: "}),a.plz," ",a.plz&&Object(m.jsx)(d.a,{color:"green",name:"check"})]}),Object(m.jsxs)(ye.a.Description,{children:[Object(m.jsx)("strong",{children:"Ort: "}),a.place," ",a.place&&Object(m.jsx)(d.a,{color:"green",name:"check"})]}),Object(m.jsxs)(ye.a.Description,{children:[Object(m.jsx)("strong",{children:"Kontakt: "}),a.contact," ",a.contact&&Object(m.jsx)(d.a,{color:"green",name:"check"})]}),Object(m.jsxs)(ye.a.Description,{children:[Object(m.jsx)("strong",{children:"Abteilung: "}),a.part," ",a.part&&Object(m.jsx)(d.a,{color:"green",name:"check"})]})]})]}),Object(m.jsx)(ye.a.Item,{children:Object(m.jsxs)(ye.a.Content,{children:[Object(m.jsx)(E.a,{style:{marginBottom:".3rem"},icon:"edit",content:"edit",onClick:function(){return h(!0)}}),Object(m.jsx)(E.a,{disabled:null===a.client,icon:"file word",content:"create",onClick:function(){return k(!0)}})]})})]}),Object(m.jsx)(H.a,{open:f,children:Object(m.jsx)(Ce,{})}),Object(m.jsx)(H.a,{open:v,children:Object(m.jsx)(Se,{})})]})};var Ee=function(e){var t=e.match.params.id;return Object(m.jsx)(S.a,{stackable:!0,columns:3,children:Object(m.jsxs)(S.a.Row,{style:{minHeight:"343px"},stretched:!0,children:[Object(m.jsx)(S.a.Column,{computer:4,tablet:16,children:Object(m.jsx)(L.a,{children:Object(m.jsx)(_e,{projectID:t})})}),Object(m.jsx)(S.a.Column,{computer:4,tablet:16,children:Object(m.jsx)(L.a,{children:Object(m.jsx)(ue.a.Group,{fluid:!0,vertical:!0,children:Object(m.jsx)(we,{projectID:t})})})}),Object(m.jsx)(S.a.Column,{computer:8,tablet:16,children:Object(m.jsx)(L.a,{children:Object(m.jsx)(me,{projectID:t})})})]})})};var De=function(){var e=g((function(e){return[e.invoices,e.setInvoices]})),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),o=Object(s.a)(a,2),i=o[0],u=o[1],l=g((function(e){return[e.invoiceStati,e.setInvoiceStati]})),j=Object(s.a)(l,2),p=j[0],f=j[1],h=g((function(e){return[e.invoiceEditModel,e.setInvoiceEditModel]})),O=Object(s.a)(h,2),x=O[0],v=O[1],k=Object(r.useState)(),w=Object(s.a)(k,2),S=w[0],I=w[1],_=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("projects/");case 3:t=e.sent,u(t.data),console.log(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("invoicesall/");case 3:t=e.sent,c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/invoicestatus/");case 3:t=e.sent,f(t.data.map((function(e){return{value:e.id,text:e.name,icon:e.icontext}}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){E(),D(),_()}),[x]),Object(r.useEffect)((function(){console.log(n)}),[n]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(N.a,{title:"Rechnungen",columns:[{title:"Name",field:"title"},{title:"Rechnungsnummer",field:"invoice_number"},{title:"Projekt",field:"project",render:function(e){var t=i.find((function(t){return t.id===e.project}));return Object(m.jsx)(b.b,{to:"/projects/".concat(t&&t.id),children:t&&t.title})}},{title:"Kunde",field:"invoice_number",render:function(e){var t=i.find((function(t){return t.id===e.project}));return Object(m.jsx)("p",{children:t&&t.client.name})}},{title:"Status",field:"status",lookup:{1:"angelegt",2:"gestellt",3:"erhalten"},render:function(e){var t=p.find((function(t){return t.value===e.status}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("span",{style:{marginRight:".2rem"},children:t&&t.text}),Object(m.jsx)(d.a,{color:t&&3===t.value?"green":t&&2===t.value?"yellow":"black",name:t&&t.icon})]})}},{title:"Offen (Tagen)",field:"date_of_invoicing",filtering:!1,render:function(e){var t=new Date,n=new Date(e.date_of_invoicing),r=(t.getTime()-n.getTime())/864e5;return 3!=e.status&&e.date_of_invoicing?Math.trunc(r):"-"}},{title:"Rechnungsstellung",field:"date_of_invoicing",type:"date",dateSetting:{locale:"de"},render:function(e){return e.date_of_invoicing?new Date(e.date_of_invoicing).toLocaleDateString("de"):"-"}},{title:"Zahlungseingang",field:"date_of_payment",render:function(e){return Object(m.jsx)("span",{style:{color:3===e.status?"#016936":"#CFCCD6"},children:e.date_of_payment?new Date(e.date_of_payment).toLocaleDateString("de"):"-"})}},{title:"Betrag",field:"amount",type:"currency",currencySetting:{locale:"de",currencyCode:"EUR"}}],actions:[{icon:"edit",color:"grey",tooltip:"edit",onClick:function(e,t){I(t.id),v(!0)}}],data:n,options:{filtering:!0,actionsColumnIndex:-1,sorting:!0,exportButton:!0,pageSize:10}}),Object(m.jsx)(H.a,{open:x,onClose:function(){return v(!1)},children:Object(m.jsx)(ge,{invoiceID:S})})]})};var Fe=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(De,{})})};var Pe=function(){var e=Object(i.useMediaQuery)({query:"(max-width: 1224px)"});return Object(m.jsx)(b.a,{children:Object(m.jsx)(k,{children:Object(m.jsx)("div",{style:{margin:e?"1rem":"2rem"},children:Object(m.jsxs)(p.d,{children:[Object(m.jsx)(z,{exact:!0,path:"/",component:Z}),Object(m.jsx)(z,{exact:!0,path:"/clients",component:se}),Object(m.jsx)(z,{exact:!0,path:"/invoices",component:Fe}),Object(m.jsx)(z,{exact:!0,path:"/projects/:id",component:Ee}),Object(m.jsx)(p.b,{exact:!0,path:"/login",children:Object(m.jsx)(A,{})})]})})})})};o.a.render(Object(m.jsx)(Pe,{}),document.getElementById("root"))}},[[631,1,2]]]);
//# sourceMappingURL=main.c984f65f.chunk.js.map